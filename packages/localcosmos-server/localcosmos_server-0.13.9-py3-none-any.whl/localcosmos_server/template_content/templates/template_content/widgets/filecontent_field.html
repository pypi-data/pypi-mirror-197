{% load i18n static imagekit %}
{% with cms_object=field.field.cms_tag %}

<div class="col-4 col-md-3 col-lg-2 fileupload" {% if not field.field.current_image %}data-new="1"{% endif %}>
	
	{{ field }}

	<label style="background-image:url({% if field.field.current_image %}{{ field.field.current_image.image_url }}{% else %}{% static 'localcosmos_server/images/add_image.svg' %}{% endif %});">
		<span>&nbsp;</span>
	</label>

	<div class="btn-group dropup">
		<button id="dropdown-{{ field.auto_id }}" class="btn btn-outline-primary btn-xs dropdown-toggle content-image-button" data-container-id="{{ field.field.content_key }}-container" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
			{% trans 'Modify' %}
		</button>
		<div class="dropdown-menu" aria-labelledby="dropdown-{{ field.auto_id }}">
			{% if field.field.current_image %}
				<a class="dropdown-item xhr" data-url="{{ field.field.licenced_url }}" ajax-target="LargeModalContent">{% trans 'Change image' %}</a>
				<a class="dropdown-item xhr" data-url="{{ field.field.delete_url }}" ajax-target="ModalContent">{% trans 'Delete' %}</a>
			{% else %}
			
				<a class="dropdown-item xhr" data-url="{{ field.field.licenced_url }}?new=1" ajax-target="LargeModalContent">{% trans 'Add image' %}</a>
				
			{% endif %}
		</div>
	</div>
		
</div>

{% endwith %}