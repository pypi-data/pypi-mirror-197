{"version":3,"file":"lib_index_js.4b62be194103411856dc.js","mappings":"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","sources":["webpack://jupyterlab_daisy/./src/handler.ts","webpack://jupyterlab_daisy/./src/index.ts"],"sourcesContent":["import { URLExt } from '@jupyterlab/coreutils';\n\nimport { ServerConnection } from '@jupyterlab/services';\n\n/**\n * Call the API extension\n *\n * @param endPoint API REST end point for the extension\n * @param init Initial values for the request\n * @returns The response body interpreted as JSON\n */\nexport async function requestAPI<T>(\n  endPoint = '',\n  init: RequestInit = {}\n): Promise<T> {\n  // Make request to Jupyter API\n  const settings = ServerConnection.makeSettings();\n  const requestUrl = URLExt.join(\n    settings.baseUrl,\n    'jupyterlab-daisy', // API Namespace\n    endPoint\n  );\n\n  let response: Response;\n  try {\n    response = await ServerConnection.makeRequest(requestUrl, init, settings);\n  } catch (error) {\n    throw new ServerConnection.NetworkError(error);\n  }\n\n  let data: any = await response.text();\n\n  if (data.length > 0) {\n    try {\n      data = JSON.parse(data);\n    } catch (error) {\n      console.log('Not a JSON response body.', response);\n    }\n  }\n\n  if (!response.ok) {\n    throw new ServerConnection.ResponseError(response, data.message || data);\n  }\n\n  return data;\n}\n","import {\n  JupyterFrontEnd,\n  JupyterFrontEndPlugin\n} from '@jupyterlab/application';\n\nimport { ISettingRegistry } from '@jupyterlab/settingregistry';\nimport { DocumentRegistry } from '@jupyterlab/docregistry';\nimport { INotebookModel, NotebookPanel, INotebookTracker } from '@jupyterlab/notebook';\nimport { CodeMirrorEditor } from '@jupyterlab/codemirror';\nimport { ToolbarButton, ICommandPalette } from '@jupyterlab/apputils';\nimport { paletteIcon } from '@jupyterlab/ui-components';\n\nimport { Panel } from '@lumino/widgets';\nimport { IDisposable } from '@lumino/disposable';\n\nimport { requestAPI } from './handler';\n\n\n\n// TODO: Should probably split sidebar logic/layout from button class\nclass ButtonExtension\n  implements DocumentRegistry.IWidgetExtension<NotebookPanel, INotebookModel>\n{\n  app: JupyterFrontEnd;\n  tracker: INotebookTracker;\n  sidebar?: Panel = undefined;\n  editor?: CodeMirrorEditor = undefined;\n  daisy_address: string = \"\";\n\n  constructor(app: JupyterFrontEnd, tracker: INotebookTracker) {\n    this.app = app;\n    this.tracker = tracker;\n  }\n\n  // Closes the sidebar and replaces the selected text\n  // TODO: If the user modifies the selection, the sidebar should also close\n  closeAndReplace(\n    ev: MouseEvent,\n    sidebar?: Panel\n  ): void {\n    sidebar?.close();\n    let chosen = (ev.target as Element).textContent ?? '';\n    this.editor?.replaceSelection(`${chosen}`);\n  }\n\n  setDaisyAddress(daisy_address: string): void {\n      this.daisy_address = daisy_address;\n  }\n\n\npopulateListRelated(source_asset_name: string, target_asset_names: Array<string>, list: HTMLElement): void {\n            while (list.firstChild != null) {\n              list.removeChild(list.firstChild);\n            }\n            requestAPI<any>(`get-related?source_asset_id=${source_asset_name}&target_asset_ids=${target_asset_names.join(',')}`)\n            .then(json => {\n                  json['RelatedTables'].forEach(\n                    (entry: {\n                      links: Array<string>;\n                    }) => {\n                      const bla = document.createElement('li');\n                      bla.setAttribute(\n                        'title',\n                        `Click '+' for details...`\n                      );\n                      const button = document.createElement('button');\n                      button.className = 'my-button';\n                      button.textContent = '+';\n                      const text = document.createElement('p');\n                      text.textContent = entry.links[0].split('/')[0];\n                      text.className = 'my-list-item-text';\n                      const tableContainer = document.createElement('div');\n                      const table = document.createElement('table');\n                      table.setAttribute('style', 'width: 100%;');\n                      tableContainer.className =\n                        'my-column-table-div-collapsed';\n                      tableContainer.setAttribute('style', 'height: 0px');\n\n                      tableContainer.appendChild(table);\n                      bla.appendChild(button);\n                      bla.appendChild(text);\n                      bla.appendChild(tableContainer);\n                      bla.className = 'my-list-item';\n                      const tableHeader = document.createElement('tr');\n                      tableHeader.innerHTML = `\n                    <th>Source Column</th>\n                    <th align=\"right\">Target Column</th>\n                    `;\n                      const splitLinkSource = entry.links[0].split('/')\n                      const splitLinkTarget = entry.links[1].split('/')\n\n                      table.appendChild(tableHeader);\n                        const tr = document.createElement('tr');\n                        tr.innerHTML = `\n                        <td>${splitLinkSource[splitLinkSource.length - 1]}</td>\n                        <td class='alnright'>${splitLinkTarget[splitLinkTarget.length - 1]}</td>\n                      `;\n                        table.appendChild(tr);\n\n                      button.onclick = () => {\n                        if (\n                          tableContainer.className === 'my-column-table-div'\n                        ) {\n                          tableContainer.className =\n                            'my-column-table-div-collapsed';\n                          button.className = 'my-button';\n                          button.textContent = '+';\n                          tableContainer.setAttribute('style', 'height: 0px');\n                        } else {\n                          tableContainer.className = 'my-column-table-div';\n                          button.className = 'my-button-toggled';\n                          button.textContent = '-';\n                          tableContainer.setAttribute(\n                            'style',\n                            `height: ${table.clientHeight}px`\n                          );\n                        }\n                      };\n                      text.onclick = ev =>\n                        this.closeAndReplace(ev, this.sidebar);\n                      list.appendChild(bla);\n                    }\n                  );\n                })\n            .catch(reason => {console.error('AEUHHH????', reason);});\n  }\n\n\n  populateList(asset_name: string, list: HTMLElement): void {\n            while (list.firstChild != null) {\n              list.removeChild(list.firstChild);\n            }\n            requestAPI<any>(`get-joinable?asset_id=${asset_name}`)\n            .then(json => {\n                  json['JoinableTables'].forEach(\n                    (entry: {\n                      table_path: string;\n                      matches: Record<string, Record<string, string>>[];\n                    }) => {\n                      const bla = document.createElement('li');\n                      bla.setAttribute(\n                        'title',\n                        `Matched ${entry.matches.length} columns, click '+' for details...`\n                      );\n                      const button = document.createElement('button');\n                      button.className = 'my-button';\n                      button.textContent = '+';\n                      const text = document.createElement('p');\n                      text.textContent = entry.table_path.split('/')[0];\n                      text.className = 'my-list-item-text';\n                      const tableContainer = document.createElement('div');\n                      const table = document.createElement('table');\n                      table.setAttribute('style', 'width: 100%;');\n                      tableContainer.className =\n                        'my-column-table-div-collapsed';\n                      tableContainer.setAttribute('style', 'height: 0px');\n\n                      tableContainer.appendChild(table);\n                      bla.appendChild(button);\n                      bla.appendChild(text);\n                      bla.appendChild(tableContainer);\n                      bla.className = 'my-list-item';\n                      const tableHeader = document.createElement('tr');\n                      tableHeader.innerHTML = `\n                    <th>Column Name</th>\n                    <th align=\"right\">COMA Score</th>\n                    `;\n                      table.appendChild(tableHeader);\n                      entry.matches.forEach(match => {\n                        const tr = document.createElement('tr');\n                        tr.innerHTML = `\n                        <td>${match['PK']['from_id']}</td>\n                        <td class='alnright'>${match['RELATED']['coma']}</td>\n                      `;\n                        table.appendChild(tr);\n                      });\n\n                      button.onclick = () => {\n                        if (\n                          tableContainer.className === 'my-column-table-div'\n                        ) {\n                          tableContainer.className =\n                            'my-column-table-div-collapsed';\n                          button.className = 'my-button';\n                          button.textContent = '+';\n                          tableContainer.setAttribute('style', 'height: 0px');\n                        } else {\n                          tableContainer.className = 'my-column-table-div';\n                          button.className = 'my-button-toggled';\n                          button.textContent = '-';\n                          tableContainer.setAttribute(\n                            'style',\n                            `height: ${table.clientHeight}px`\n                          );\n                        }\n                      };\n                      text.onclick = ev =>\n                        this.closeAndReplace(ev, this.sidebar);\n                      list.appendChild(bla);\n                    }\n                  );\n                })\n            .catch(reason => {console.error('AEUHHH????', reason);});\n  }\n\n\n  createNew(\n    panel: NotebookPanel,\n    context: DocumentRegistry.IContext<INotebookModel>\n  ): IDisposable {\n    const mybutton = new ToolbarButton({\n      icon: paletteIcon,\n      tooltip: \"Augment Data\",\n      onClick: () => {\n        this.sidebar?.close();\n\n        const activeCell = this.tracker.activeCell;\n        if (activeCell !== null) {\n          this.editor = activeCell.editor as CodeMirrorEditor;\n          let value = this.editor.getRange(\n            this.editor.getCursor('start'),\n            this.editor.getCursor('end')\n          );\n\n\n          this.sidebar = new Panel();\n          this.sidebar.addClass('my-panel');\n          this.sidebar.id = 'daisy-jupyterlab';\n          this.sidebar.title.icon = paletteIcon;\n          this.app.shell.add(this.sidebar, 'right', { rank: 50000 });\n          this.app.shell.activateById(this.sidebar.id);\n\n          const header = document.createElement('h1');\n          header.textContent = 'Related Datasets';\n\n          const runButton = document.createElement('button');\n          runButton.textContent = 'Execute Query';\n          runButton.className = 'my-query-button'\n\n\n          const inp = document.createElement('input')\n          inp.type = \"text\"\n          inp.name = \"name\"\n          inp.id = \"source\"\n          inp.value = value\n          inp.className = 'my-highlighted-item';\n          inp.placeholder = \"Source\"\n\n          const sep = document.createElement('hr')\n          sep.className = 'solid'\n\n          const additionalFields = document.createElement('div');\n          additionalFields.id = \"targets\"\n\n          const form = document.createElement('form');\n          \n          form.appendChild(inp); \n          form.appendChild(sep);\n          form.appendChild(additionalFields);\n          form.appendChild(runButton);\n\n          const checkbox = document.createElement('input')\n          checkbox.type=\"checkbox\"\n          checkbox.id=\"related\"\n          checkbox.name=\"related\"\n\n          const checkboxLabel = document.createElement('label')\n          checkboxLabel.htmlFor = \"related\"\n          checkboxLabel.textContent = \"Connect to existing assets\"\n\n          const checkboxSpan = document.createElement('span')\n          checkboxSpan.appendChild(checkbox)\n          checkboxSpan.appendChild(checkboxLabel)\n\n          const addField = function(node: HTMLElement|null) {\n              const extraInp = document.createElement('input')\n              extraInp.type = \"text\"\n              extraInp.name = `target-${additionalFields.childElementCount}`\n              extraInp.value = \"\"\n              extraInp.className = 'my-highlighted-item';\n\n              const addButton = document.createElement('button');\n              addButton.className = 'my-button';\n              addButton.textContent = '+';\n              addButton.type = \"button\"\n\n              const fieldSpan = document.createElement('span')\n              fieldSpan.appendChild(extraInp)\n              fieldSpan.appendChild(addButton)\n\n              addButton.onclick = (event) => {\n                addField(fieldSpan)\n              }\n\n\n              additionalFields.insertBefore(fieldSpan, node?.nextSibling ?? null);\n\n              for (let i = 0; i < additionalFields.childElementCount; i++) {\n                (additionalFields.children[i].children[0] as HTMLInputElement).placeholder = `Asset ${i}`;\n              }\n          }\n\n\n          checkbox.addEventListener('change', (event) => {\n            if ((event.currentTarget as HTMLInputElement).checked) {\n              addField(null);\n            } else {\n              while (additionalFields.firstChild != null) {\n                additionalFields.removeChild(additionalFields.firstChild);\n              }\n            }\n          })\n\n\n\n\n\n          const list = document.createElement('ul');\n          list.className = 'my-list';\n\n          const temp = this;\n          form.onsubmit = function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n\n            if (!checkbox.checked) {\n              temp.populateList(inp.value, list)\n            } else {\n              const targets = []\n              for (const child of additionalFields.children) {\n                const target = (child.children[0] as HTMLInputElement).value\n                targets.push(target)\n              }\n              temp.populateListRelated(inp.value, targets, list);\n            }\n          }\n\n          this.sidebar?.node.appendChild(header);\n          this.sidebar?.node.appendChild(checkboxSpan);\n          this.sidebar?.node.appendChild(form);\n          this.sidebar?.node.appendChild(list);\n\n          this.populateList(value, list);\n        \n        }\n      }\n    });\n\n    // Add the toolbar button to the notebook toolbar\n    panel.toolbar.insertItem(10, 'mybutton', mybutton);\n\n    return mybutton;\n  }\n}\n\n\n/**\n * Initialization data for the jupyterlab_daisy extension.\n */\nconst plugin: JupyterFrontEndPlugin<void> = {\n  id: 'jupyterlab_daisy:plugin',\n  autoStart: true,\n  optional: [ISettingRegistry, ICommandPalette, INotebookTracker],\n  activate: (\n    app: JupyterFrontEnd, \n    settingRegistry: ISettingRegistry | null,\n    palette: ICommandPalette,\n    tracker: INotebookTracker) => {\n    console.log('JupyterLab extension jupyterlab_daisy is activated!');\n\n    if (settingRegistry) {\n      settingRegistry\n        .load(plugin.id)\n        .then(settings => {\n          console.log('jupyterlab_daisy settings loaded:', settings.composite);\n        })\n        .catch(reason => {\n          console.error('Failed to load settings for jupyterlab_daisy.', reason);\n        });\n    }\n\n    const button = new ButtonExtension(app, tracker);\n    app.docRegistry.addWidgetExtension('Notebook', button);\n  }\n};\n\nexport default plugin;\n"],"names":[],"sourceRoot":""}