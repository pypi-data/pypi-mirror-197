"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3382],{10867:function(e,r,s){s.d(r,{T:function(){return a}});var n=s(97142),t=s(65648),i=s(85893),a=function(e){return(0,n.C)(t.uu).filter((function(r){return e.includes(r)})).length>0};r.Z=function(e){var r=e.scopes,s=e.children;return a(r)?(0,i.jsx)(i.Fragment,{children:s}):null}},70783:function(e,r,s){s.d(r,{HK:function(){return i},VY:function(){return n.V}});var n=s(63719),t=s(65698),i=function(){var e=(0,n.V)().errorAlert;return{handleError:function(r){var s="An unexpected error occurred. Please try again.";(0,t.Ot)(r)?s=r.data.detail:(0,t.tB)(r)&&(s=r.data.detail[0].msg),e(s)}}};s(67294)},63719:function(e,r,s){s.d(r,{V:function(){return u}});var n=s(59499),t=s(13450),i=s(26707),a=s(23256),o=s(93225),c=s(85893);function l(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),s.push.apply(s,n)}return s}function d(e){for(var r=1;r<arguments.length;r++){var s=null!=arguments[r]?arguments[r]:{};r%2?l(Object(s),!0).forEach((function(r){(0,n.Z)(e,r,s[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(s,r))}))}return e}var u=function(){var e=(0,t.pm)();return{errorAlert:function(r,s,n){var t=d(d({},n),{},{position:(null===n||void 0===n?void 0:n.position)||"top",render:function(e){var n=e.onClose;return(0,c.jsxs)(i.bZ,{alignItems:"normal",status:"error",children:[(0,c.jsx)(i.zM,{}),(0,c.jsxs)(a.xu,{children:[s&&(0,c.jsx)(i.Cd,{children:s}),(0,c.jsx)(i.X,{children:r})]}),(0,c.jsx)(o.P,{onClick:n,position:"relative",right:0,size:"sm",top:-1})]})}});null!==n&&void 0!==n&&n.id&&e.isActive(n.id)?e.update(n.id,t):e(t)},successAlert:function(r,s,n){var t=d(d({},n),{},{position:(null===n||void 0===n?void 0:n.position)||"top",render:function(e){var n=e.onClose;return(0,c.jsxs)(i.bZ,{alignItems:"normal",status:"success",variant:"subtle",children:[(0,c.jsx)(i.zM,{}),(0,c.jsxs)(a.xu,{children:[s&&(0,c.jsx)(i.Cd,{children:s}),(0,c.jsx)(i.X,{children:r})]}),(0,c.jsx)(o.P,{onClick:n,position:"relative",right:0,size:"sm",top:-1})]})}});null!==n&&void 0!==n&&n.id&&e.isActive(n.id)?e.update(n.id,t):e(t)}}}},10846:function(e,r,s){s.d(r,{MA:function(){return d},Vo:function(){return p},t5:function(){return u}});var n=s(59499),t=s(23256),i=s(85893);function a(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),s.push.apply(s,n)}return s}function o(e){for(var r=1;r<arguments.length;r++){var s=null!=arguments[r]?arguments[r]:{};r%2?a(Object(s),!0).forEach((function(r){(0,n.Z)(e,r,s[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(s,r))}))}return e}var c=function(e){var r=e.message;return(0,i.jsxs)(t.xv,{"data-testid":"toast-success-msg",children:[(0,i.jsx)("strong",{children:"Success:"})," ",r]})},l=function(e){var r=e.message;return(0,i.jsxs)(t.xv,{"data-testid":"toast-error-msg",children:[(0,i.jsx)("strong",{children:"Error:"})," ",r]})},d={variant:"subtle",position:"top",description:"",duration:5e3,status:"success",isClosable:!0},u=function(e){var r=(0,i.jsx)(c,{message:e});return o(o({},d),{description:r})},p=function(e){var r=(0,i.jsx)(l,{message:e});return o(o({},d),{description:r,status:"error"})}},53547:function(e,r,s){s.d(r,{Z:function(){return T}});var n=s(27812),t=s(50029),i=s(16835),a=s(87794),o=s.n(a),c=s(23256),l=s(43894),d=s(12036),u=s(70783),p=s(82175),h=s(41664),m=s.n(h),f=s(11163),j=s(67294),x=s(74231),w=s(18459),b=s(96016),v=x.Z_().required().min(8,"Password must have at least eight characters.").matches(/[0-9]/,"Password must have at least one number.").matches(/[A-Z]/,"Password must have at least one capital letter.").matches(/[a-z]/,"Password must have at least one lowercase letter.").matches(/[\W]/,"Password must have at least one symbol."),g=s(16227),y=s(97142),O=s(37161),P=s(10867),C=s(59499),S=s(97375),z=s(13450),Z=s(26537),_=s(65698),E=s(10846),k=s(26595),D=s(43072),V=s(85893);function R(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),s.push.apply(s,n)}return s}function A(e){for(var r=1;r<arguments.length;r++){var s=null!=arguments[r]?arguments[r]:{};r%2?R(Object(s),!0).forEach((function(r){(0,C.Z)(e,r,s[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):R(Object(s)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(s,r))}))}return e}var q=x.Ry().shape({password:v.label("Password"),passwordConfirmation:x.Z_().required().oneOf([x.iH("password")],"Passwords must match").label("Password confirmation")}),I={password:"",passwordConfirmation:""},M=function(e){var r=function(e){var r=(0,S.qY)(),s=(0,z.pm)(),n=(0,D.ls)(),a=(0,i.Z)(n,1)[0],c=function(){var n=(0,t.Z)(o().mark((function n(t){var i;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a({id:e,new_password:t.password});case 2:i=n.sent,(0,k.isErrorResult)(i)?s((0,E.Vo)((0,_.e$)(i.error))):(s((0,E.t5)("Successfully reset user's password. Please inform the user of their new password.")),r.onClose());case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return A(A({},r),{},{handleResetPassword:c})}(e.id),s=r.handleResetPassword,n=r.isOpen,a=r.onClose,d=r.onOpen;return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(l.zx,{colorScheme:"primary",size:"sm",onClick:d,"data-testid":"reset-password-btn",children:"Reset password"}),(0,V.jsxs)(Z.u_,{isCentered:!0,isOpen:n,onClose:a,children:[(0,V.jsx)(Z.ZA,{}),(0,V.jsx)(Z.hz,{children:(0,V.jsx)(p.J9,{initialValues:I,validationSchema:q,onSubmit:s,children:function(e){var r=e.isSubmitting,s=e.dirty,n=e.isValid;return(0,V.jsxs)(p.l0,{children:[(0,V.jsx)(Z.xB,{children:"Reset Password"}),(0,V.jsx)(Z.ol,{}),(0,V.jsx)(Z.fe,{children:(0,V.jsxs)(c.Kq,{direction:"column",spacing:4,children:[(0,V.jsx)(c.xv,{mb:2,children:"Choose a new password for this user."}),(0,V.jsx)(b.j0,{name:"password",label:"Password",placeholder:"********",type:"password",tooltip:"Password must contain at least 8 characters, 1 number, 1 capital letter, 1 lowercase letter, and at least 1 symbol."}),(0,V.jsx)(b.j0,{name:"passwordConfirmation",label:"Confirm Password",placeholder:"********",type:"password",tooltip:"Must match above password."})]})}),(0,V.jsx)(Z.mz,{children:(0,V.jsxs)(l.hE,{size:"sm",spacing:"2",width:"100%",children:[(0,V.jsx)(l.zx,{onClick:a,variant:"outline",width:"50%",children:"Cancel"}),(0,V.jsx)(l.zx,{colorScheme:"primary",disabled:!s||!n,isLoading:r,type:"submit",width:"50%","data-testid":"submit-btn",children:"Change Password"})]})})]})}})})]})]})},N=s(27634),U=s(30268);function F(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),s.push.apply(s,n)}return s}function K(e){for(var r=1;r<arguments.length;r++){var s=null!=arguments[r]?arguments[r]:{};r%2?F(Object(s),!0).forEach((function(r){(0,C.Z)(e,r,s[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):F(Object(s)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(s,r))}))}return e}var L=function(e){var r=function(e){var r=(0,S.qY)(),s=(0,j.useState)(""),n=s[0],a=s[1],c=(0,j.useState)(""),l=c[0],d=c[1],u=(0,D.ev)(),p=(0,i.Z)(u,2),h=p[0],m=p[1].isLoading,f=!!(e&&l&&n),x=function(){var s=(0,t.Z)(o().mark((function s(){return o().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:f&&h({id:e,old_password:n,new_password:l}).unwrap().then((function(){return r.onClose()}));case 1:case"end":return s.stop()}}),s)})));return function(){return s.apply(this,arguments)}}();return K(K({},r),{},{changePasswordValidation:f,handleChange:function(e){"oldPassword"===e.target.name?a(e.target.value):d(e.target.value)},handleChangePassword:x,isLoading:m,newPasswordValue:l,oldPasswordValue:n})}(e.id),s=r.changePasswordValidation,n=r.handleChange,a=r.handleChangePassword,d=r.isLoading,u=r.isOpen,p=r.newPasswordValue,h=r.oldPasswordValue,m=r.onClose,f=r.onOpen;return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(l.zx,{colorScheme:"primary",size:"sm",onClick:f,"data-testid":"update-password-btn",children:"Update Password"}),(0,V.jsxs)(Z.u_,{isCentered:!0,isOpen:u,onClose:m,children:[(0,V.jsx)(Z.ZA,{}),(0,V.jsxs)(Z.hz,{children:[(0,V.jsx)(Z.xB,{children:"Update Password"}),(0,V.jsx)(Z.ol,{}),(0,V.jsx)(Z.fe,{pb:6,children:(0,V.jsxs)(c.Kq,{direction:"column",spacing:"15px",children:[(0,V.jsx)(N.NI,{children:(0,V.jsx)(U.II,{isRequired:!0,name:"oldPassword",onChange:n,placeholder:"Old Password",type:"password",value:h,"data-testid":"input-oldPassword"})}),(0,V.jsx)(N.NI,{children:(0,V.jsx)(U.II,{isRequired:!0,name:"newPassword",onChange:n,placeholder:"New Password",type:"password",value:p,"data-testid":"input-newPassword"})})]})}),(0,V.jsxs)(Z.mz,{children:[(0,V.jsx)(l.zx,{bg:"white",marginRight:"10px",onClick:m,size:"sm",variant:"solid",width:"50%",children:"Cancel"}),(0,V.jsx)(l.zx,{bg:"primary.800",color:"white",disabled:!s,isLoading:d,mr:3,onClick:a,size:"sm",type:"submit",variant:"solid",width:"50%","data-testid":"submit-btn",children:"Change Password"})]})]})]})]})},W=function(e){var r=e.profileId,s=null==r,n=(0,y.C)(O.dy),t=!!n&&n.id===r;return s?(0,V.jsx)(b.j0,{name:"password",label:"Password",placeholder:"********",type:"password",tooltip:"Password must contain at least 8 characters, 1 number, 1 capital letter, 1 lowercase letter, and at least 1 symbol."}):r?(0,V.jsxs)(c.Ug,{children:[t?(0,V.jsx)(L,{id:r}):null,(0,V.jsx)(P.Z,{scopes:[g.Sh.USER_PASSWORD_RESET],children:(0,V.jsx)(M,{id:r})})]}):null},X=g.Sh.PRIVACY_REQUEST_READ,H={username:"",first_name:"",last_name:"",password:"",scopes:[X]},B=x.Ry().shape({username:x.Z_().required().label("Username"),first_name:x.Z_().label("First name"),last_name:x.Z_().label("Last name"),password:v.label("Password"),scopes:x.IX().of(x.Z_())}),T=function(e){var r=e.onSubmit,s=e.initialValues,a=e.canEditNames,h=e.canChangePassword,x=(0,f.useRouter)(),v=(0,u.HK)().handleError,g=Array.isArray(x.query.id)?x.query.id[0]:x.query.id,y=!(null==g)&&!a,O=(0,D.lD)(),P=(0,i.Z)(O,1)[0],C=function(){var e=(0,t.Z)(o().mark((function e(s){var t,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(s);case 2:if(!("error"in(t=e.sent))){e.next=6;break}return v(t.error),e.abrupt("return");case 6:return i=t.data,a={user_id:i.id,scopes:(0,n.Z)(new Set([].concat((0,n.Z)(s.scopes),[X])))},e.next=10,P(a);case 10:"error"in e.sent||x.push(w.e3);case 12:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),S=h?B:B.omit(["password"]),z=(0,j.useMemo)((function(){return w.GM.map((function(e){return e.scope}))}),[]),Z=(0,j.useCallback)((function(e){e.setFieldValue("scopes",(0,n.Z)(z))}),[z]),_=(0,j.useCallback)((function(e){e.setFieldValue("scopes",[X])}),[]);return(0,V.jsx)(p.J9,{onSubmit:C,initialValues:null!==s&&void 0!==s?s:H,validationSchema:S,children:function(e){return(0,V.jsx)(p.l0,{children:(0,V.jsxs)(c.xu,{maxW:["xs","xs","100%"],width:"100%",children:[(0,V.jsxs)(c.Kq,{mb:8,spacing:6,children:[(0,V.jsxs)(c.Kq,{mb:8,spacing:6,maxWidth:"40%",children:[(0,V.jsx)(b.j0,{name:"username",label:"Username",placeholder:"Enter new username"}),(0,V.jsx)(b.j0,{name:"first_name",label:"First Name",placeholder:"Enter first name of user",disabled:y}),(0,V.jsx)(b.j0,{name:"last_name",label:"Last Name",placeholder:"Enter last name of user",disabled:y}),(0,V.jsx)(W,{profileId:g})]}),(0,V.jsx)(c.iz,{mb:7,mt:7}),(0,V.jsx)(c.X6,{fontSize:"xl",colorScheme:"primary",children:"Permissions"}),(0,V.jsx)(c.xv,{children:"Select permissions to assign to this user"}),(0,V.jsxs)(c.xu,{children:[(0,V.jsx)(l.zx,{variant:"outline",size:"sm",mr:3,onClick:function(){Z(e)},children:"Select all"}),(0,V.jsx)(l.zx,{variant:"outline",size:"sm",onClick:function(){_(e)},children:"Deselect all"})]}),(0,V.jsx)(c.xv,{children:"To apply the changes, click 'Save' below."}),(0,V.jsx)(c.iz,{mb:2,mt:2}),(0,V.jsx)(c.Kq,{spacing:[1,5],direction:"column",children:w.GM.map((function(r){var s=e.values.scopes.indexOf(r.scope)>=0;return(0,V.jsx)(d.XZ,{colorScheme:"purple",onChange:function(){s?e.setFieldValue("scopes",e.values.scopes.filter((function(e){return e!==r.scope}))):e.setFieldValue("scopes",[].concat((0,n.Z)(e.values.scopes),[r.scope]))},id:"scopes-".concat(r.privilege),name:"scopes",isChecked:s,value:r.scope===X?void 0:r.scope,isDisabled:r.scope===X,isReadOnly:r.scope===X,children:r.privilege},r.privilege)}))})]}),(0,V.jsx)(m(),{href:w.e3,passHref:!0,children:(0,V.jsx)(l.zx,{variant:"outline",mr:3,size:"sm",children:"Cancel"})}),(0,V.jsx)(l.zx,{type:"submit",bg:"primary.800",_hover:{bg:"primary.400"},_active:{bg:"primary.500"},colorScheme:"primary",size:"sm",children:"Save"})]})})}})}},33278:function(e,r,s){var n=s(23256),t=s(20440),i=s(41664),a=s.n(i),o=(s(67294),s(17140)),c=s(18459),l=s(85893);r.Z=function(e){var r=e.title,s=e.children;return(0,l.jsxs)(o.Z,{title:"User Management",children:[(0,l.jsxs)(n.X6,{fontSize:"2xl",fontWeight:"semibold",children:["User Management",(0,l.jsx)(n.xu,{mt:2,mb:7,children:(0,l.jsxs)(t.aG,{fontWeight:"medium",fontSize:"sm",children:[(0,l.jsx)(t.gN,{children:(0,l.jsx)(a(),{href:c.e3,passHref:!0,children:(0,l.jsx)(t.At,{href:c.e3,children:"User Management"})})}),(0,l.jsx)(t.gN,{children:(0,l.jsx)(t.At,{href:"#",children:r})})]})})]}),s]})}},26595:function(e,r,s){s.d(r,{isAPIError:function(){return n.Bw},isErrorResult:function(){return n.D4}});var n=s(27396)}}]);