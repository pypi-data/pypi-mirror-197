import{aZ as g,d as F,Z as N,aj as k,a_ as D,c as m,F as O,u as a,a as x,w as d,e as I,a2 as V,a3 as B,a$ as J,o as P,b as i,b0 as T,b1 as j,b2 as K,b3 as U,K as y}from"./index-4d5db146-65db30f1.js";import{u as Z}from"./usePageTitle-064626f5.js";import"./index-4882272f.js";import{r as f}from"./routes-6a4f68fa.js";class $ extends g{parse(t){return JSON.parse(decodeURIComponent(t??""))}format(t){return encodeURIComponent(JSON.stringify(t))}}const M=F({__name:"FlowRunCreate",setup(R){const t=N(),s=k("deploymentId"),n=B(),c=D("parameters",$,void 0),_=m(()=>!e.value||!c.value?{}:J.map("SchemaValuesResponse",{schema:e.value.parameterOpenApiSchema,values:c.value},"SchemaValues")),w=O(t.deployments.getDeployment,[s]),e=m(()=>w.response),h=async r=>{var u,o;try{const l=await t.deployments.createDeploymentFlowRun(s.value,r),p=((o=(u=r.state)==null?void 0:u.stateDetails)==null?void 0:o.scheduledTime)??void 0,C=!p,b=K(U,{flowRun:l,flowRunRoute:f.flowRun,router:n,immediate:C,startTime:p});y(b,"success"),n.push(f.deployment(s.value))}catch(l){y("Something went wrong trying to create a flow run","error"),console.error(l)}},v=()=>{n.back()},S=m(()=>e.value?`Create Flow Run for Deployment: ${e.value.name}`:"Create Flow Run for Deployment");return Z(S),(r,u)=>{const o=V("p-layout-default");return a(e)?(P(),x(o,{key:0},{header:d(()=>[i(a(T),{deployment:a(e)},null,8,["deployment"])]),default:d(()=>[i(a(j),{deployment:a(e),parameters:a(_),onSubmit:h,onCancel:v},null,8,["deployment","parameters"])]),_:1})):I("",!0)}}});export{M as default};
