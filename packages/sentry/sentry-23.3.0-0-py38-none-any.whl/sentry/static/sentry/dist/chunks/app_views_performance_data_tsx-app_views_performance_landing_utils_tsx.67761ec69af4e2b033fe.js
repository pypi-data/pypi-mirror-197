"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_performance_data_tsx-app_views_performance_landing_utils_tsx"],{"./app/components/performance/searchBar.tsx":(t,e,r)=>{r.d(e,{D:()=>x,Z:()=>E});var n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=(r("../node_modules/core-js/modules/es.array.push.js"),r("../node_modules/core-js/modules/es.error.cause.js"),r("../node_modules/react/index.js")),a=r("../node_modules/react-router/es/index.js"),o=r("../node_modules/lodash/debounce.js"),i=r.n(o),c=r("./app/components/searchBar.tsx"),l=r("./app/components/smartSearchBar/utils.tsx"),u=r("./app/constants/index.tsx"),d=r("./app/locale.tsx"),p=r("./app/utils/discover/genericDiscoverQuery.tsx"),m=r("./app/utils/tokenizeSearch.tsx"),f=r("./app/utils/useApi.tsx"),h=r("./app/utils/useOnClickOutside.tsx"),y=r("./app/utils/withDomainRequired.tsx"),_=r("./app/views/performance/transactionSummary/utils.tsx"),g=r("./app/components/smartSearchBar/searchDropdown.tsx"),v=r("./app/components/smartSearchBar/types.tsx"),w=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function A(t){const{organization:e,eventView:r,onSearch:n,query:o}=t,[A,E]=(0,s.useState)([]),b=A[0]?.children?.length||0,[j,q]=(0,s.useState)(-1),[F,D]=(0,s.useState)(!1),L=()=>D(!1),[R,O]=(0,s.useState)(!1),[C,N]=(0,s.useState)(o),k=(0,s.useRef)(null);(0,h.Z)(k,(0,s.useCallback)(L,[]));const $=(0,f.Z)(),B=r.clone(),V=`/organizations/${e.slug}/events/`,M=B.project?.map(String),I=(0,s.useCallback)(i()((async t=>{try{O(!0);const e=new m.MY("");e.addFilterValues("transaction",[x(t)],!1),e.addFilterValues("event.type",["transaction"]),Object.keys($.activeRequests).length&&$.clear();const[r]=await(0,p.AA)($,V,{field:["transaction","project_id","count()"],project:M,sort:"-count()",query:e.formatString(),statsPeriod:B.statsPeriod,referrer:"api.performance.transaction-name-search-bar"}),n=r.data.reduce(((t,e)=>(t.children.push({value:S(e),title:e.transaction,type:v.q.LINK,desc:""}),t)),{title:"All Transactions",children:[],icon:null,type:"header"});q(-1),E([n])}catch(t){throw new Error("Unable to fetch event field values")}finally{O(!1)}}),u.Dk,{leading:!0}),[$,V,B.statsPeriod,M.join(",")]),W=t=>{const e=T(t);Z(e.transaction,!1)},Z=(t,e)=>{E([]),N(t),t=new m.MY(t).formatString(),n(t?e?t:`transaction:"${t}"`:""),L()};return(0,w.BX)(P,{"data-test-id":"transaction-search-bar",ref:k,children:[(0,w.tZ)(c.Z,{placeholder:(0,d.t)("Search Transactions"),onChange:t=>{if(N(t),0===t.length&&n(""),t.length<3)return E([]),void L();D(!0),I(t)},onKeyDown:t=>{const{key:e}=t;if(!R)if("Escape"===e&&F)L();else{if(("ArrowUp"===e||"ArrowDown"===e)&&F&&b>0){const t=A[0].children[j],r=(j+b+("ArrowUp"===e?-1:1))%b;q(r);const n=A[0].children[r];let s=A;return t&&(s=(0,l.$l)(A,t,!1)),n&&(s=(0,l.$l)(s,n,!0)),void E(s)}if("Enter"===e){t.preventDefault();const e=A[0]?.children[j];e?.value?W(e.value):Z(C,!0)}}},query:C}),F&&(0,w.tZ)(g.Z,{maxMenuHeight:300,searchSubstring:C,loading:R,items:A,onClick:W,onIconClick:t=>{(t=>{const{transaction:r,project_id:n}=t,s=B.generateQueryStringObject();E([]);const o=(0,_.e1)({orgSlug:e.slug,transaction:r,projectID:String(n),query:s});a.browserHistory.push((0,y.D)(o))})(T(t))}})]})}A.displayName="SearchBar";const S=t=>`${t.transaction}:${t.project_id}`,T=t=>{const e=t.lastIndexOf(":");return{project_id:parseInt(t.slice(e+1),10),transaction:t.slice(0,e)}},x=t=>(t.startsWith("*")||(t="*"+t),t.endsWith("*")||(t+="*"),t),P=(0,n.Z)("div",{target:"efn8czs0"})({name:"bjn8wh",styles:"position:relative"}),E=A},"./app/utils/useOnClickOutside.tsx":(t,e,r)=>{r.d(e,{Z:()=>s});var n=r("../node_modules/react/index.js");const s=function(t,e){(0,n.useEffect)((()=>{const r=r=>{const n=t?.current;n&&!n.contains(r.target)&&e(r)};return document.addEventListener("mousedown",r),document.addEventListener("touchstart",r),()=>{document.removeEventListener("mousedown",r),document.removeEventListener("touchstart",r)}}),[t,e])}},"./app/views/performance/data.tsx":(t,e,r)=>{r.d(e,{$r:()=>A,AM:()=>q,C:()=>j,GY:()=>f,V$:()=>v,hj:()=>y,mW:()=>h,yX:()=>g}),r("../node_modules/core-js/modules/es.array.includes.js"),r("../node_modules/core-js/modules/es.array.push.js");var n=r("./app/components/gridEditable/index.tsx"),s=r("./app/components/performance/searchBar.tsx"),a=r("./app/constants/pageFilters.tsx"),o=r("./app/locale.tsx"),i=r("./app/utils/discover/eventView.tsx"),c=r("./app/utils/performance/vitals/constants.tsx"),l=r("./app/utils/queryString.tsx"),u=r("./app/utils/tokenizeSearch.tsx"),d=r("./app/views/performance/trends/utils.tsx"),p=r("./app/views/performance/landing/utils.tsx"),m=r("./app/views/performance/vitalDetail/utils.tsx");const f="7d",h=300,y=["transaction","project","tpm","p50","p95","failure rate","apdex","users","user misery"],_=["transaction"],g=t=>t?.features?.includes("performance-landing-page-stats-period")?"14d":f;let v;!function(t){t.TPM="tpm",t.THROUGHPUT="throughput",t.FAILURE_RATE="failureRate",t.P50="p50",t.P75="p75",t.P95="p95",t.P99="p99",t.LCP="lcp",t.FCP="fcp",t.FID="fid",t.CLS="cls",t.STATUS_BREAKDOWN="statusBreakdown",t.DURATION_DISTRIBUTION="durationDistribution",t.USER_MISERY="userMisery",t.APDEX="apdex",t.APP_START_COLD="appStartCold",t.APP_START_WARM="appStartWarm",t.SLOW_FRAMES="slowFrames",t.FROZEN_FRAMES="frozenFrames",t.STALL_PERCENTAGE="stallPercentage",t.MOST_ISSUES="mostIssues",t.MOST_ERRORS="mostErrors",t.SLOW_HTTP_SPANS="slowHTTPSpans"}(v||(v={}));const w={tpm:()=>(0,o.t)("TPM is the number of recorded transaction events per minute."),throughput:()=>(0,o.t)("Throughput is the number of recorded transaction events per minute."),failureRate:()=>(0,o.t)("Failure rate is the percentage of recorded transactions that had a known and unsuccessful status."),p50:()=>(0,o.t)("p50 indicates the duration that 50% of transactions are faster than."),p75:()=>(0,o.t)("p75 indicates the duration that 75% of transactions are faster than."),p95:()=>(0,o.t)("p95 indicates the duration that 95% of transactions are faster than."),p99:()=>(0,o.t)("p99 indicates the duration that 99% of transactions are faster than."),lcp:()=>(0,o.t)("Largest contentful paint (LCP) is a web vital meant to represent user load times"),fcp:()=>(0,o.t)("First contentful paint (FCP) is a web vital meant to represent user load times"),fid:()=>(0,o.t)("First input delay (FID) is a web vital representing load for the first user interaction on a page."),cls:()=>(0,o.t)("Cumulative layout shift (CLS) is a web vital measuring unexpected visual shifting a user experiences."),statusBreakdown:()=>(0,o.t)("The breakdown of transaction statuses. This may indicate what type of failure it is."),durationDistribution:()=>(0,o.t)("Distribution buckets counts of transactions at specifics times for your current date range"),userMisery:()=>(0,o.t)("User Misery is a score that represents the number of unique users who have experienced load times 4x the project's configured threshold. Adjust project threshold in project performance settings."),apdex:()=>(0,o.t)("Apdex is the ratio of both satisfactory and tolerable response times to all response times. To adjust the tolerable threshold, go to project performance settings."),appStartCold:()=>(0,o.t)("Cold start is a measure of the application start up time from scratch."),appStartWarm:()=>(0,o.t)("Warm start is a measure of the application start up time while still in memory."),slowFrames:()=>(0,o.t)("The count of the number of slow frames in the transaction."),frozenFrames:()=>(0,o.t)("The count of the number of frozen frames in the transaction."),mostErrors:()=>(0,o.t)("Transactions with the most associated errors."),mostIssues:()=>(0,o.t)("The most instances of an issue for a related transaction."),slowHTTPSpans:()=>(0,o.t)("The transactions with the slowest spans of a certain type."),stallPercentage:()=>(0,o.t)("The percentage of the transaction duration in which the application is in a stalled state.")};function A(t,e){return w.hasOwnProperty(e)?w[e](t):""}function S(t,e){const r=new u.MY(t);if(r.freeText.length>0){const t=r.freeText.join(" ");r.setFilterValues("transaction",[(0,s.D)(t)],!1),r.freeText=[]}return e&&(r.tokens=r.tokens.filter((t=>t.key&&_.includes(t.key)))),r.formatString()}function T(t,e,r){const{query:s}=t,a=s.start&&s.end,u={id:void 0,name:(0,o.t)("Performance"),query:"event.type:transaction",projects:[],fields:["team_key_transaction","transaction","project","tpm()","p50()","p95()","failure_rate()","apdex()","count_unique(user)","count_miserable(user)","user_misery()"],version:2},p=Array(u.fields.length).fill(n.z7);p[u.fields.length-1]="110",u.widths=p,s.statsPeriod||a||(u.range=g(r)),u.orderby=(0,l.ro)(s.sort,"-tpm");const m=(0,l.ro)(s.query,"");u.query=S(m,e);const f=i.ZP.fromNewQueryWithLocation(u,t);if(f.additionalConditions.addFilterValues("event.type",["transaction"]),s.trendParameter){const e=(0,d.IO)(t,[],[]);c.r9[e.column]&&f.additionalConditions.addFilterValues("has",[e.column])}return f}function x(t,e,r){const{query:s}=t,a=s.start&&s.end,c={id:void 0,name:(0,o.t)("Performance"),query:"event.type:transaction",projects:[],fields:["team_key_transaction","transaction","project","transaction.op","http.method","tpm()","p50()","p95()","failure_rate()","apdex()","count_unique(user)","count_miserable(user)","user_misery()"],version:2},u=Array(c.fields.length).fill(n.z7);u[c.fields.length-1]="110",c.widths=u,s.statsPeriod||a||(c.range=g(r)),c.orderby=(0,l.ro)(s.sort,"-tpm");const d=(0,l.ro)(s.query,"");c.query=S(d,e);const p=i.ZP.fromNewQueryWithLocation(c,t);return p.additionalConditions.addFilterValues("event.type",["transaction"]),p}function P(t,e,r,s,c){const{query:u}=t,d=["team_key_transaction","transaction","project","transaction.op","tpm()","p75(measurements.frames_slow_rate)","p75(measurements.frames_frozen_rate)"],p=r.project;if(p.length>0&&p[0]!==a.mP){const t=e.filter((t=>p.includes(parseInt(t.id,10))));t.length>0&&t.every((t=>"react-native"===t.platform))&&d.push("p75(measurements.stall_percentage)")}const m=u.start&&u.end,f={id:void 0,name:(0,o.t)("Performance"),query:"event.type:transaction",projects:[],fields:[...d,"count_unique(user)","count_miserable(user)","user_misery()"],version:2},h=Array(f.fields.length).fill(n.z7);h[f.fields.length-1]="110",f.widths=h,u.statsPeriod||m||(f.range=g(c)),f.orderby=(0,l.ro)(u.sort,"-tpm");const y=(0,l.ro)(u.query,"");f.query=S(y,s);const _=i.ZP.fromNewQueryWithLocation(f,t);return _.additionalConditions.addFilterValues("event.type",["transaction"]),_}function E(t,e,r){const{query:s}=t,a=s.start&&s.end,c={id:void 0,name:(0,o.t)("Performance"),query:"event.type:transaction",projects:[],fields:["team_key_transaction","transaction","project","tpm()","p75(measurements.fcp)","p75(measurements.lcp)","p75(measurements.fid)","p75(measurements.cls)","count_unique(user)","count_miserable(user)","user_misery()"],version:2},u=Array(c.fields.length).fill(n.z7);u[c.fields.length-1]="110",c.widths=u,s.statsPeriod||a||(c.range=g(r)),c.orderby=(0,l.ro)(s.sort,"-tpm");const d=(0,l.ro)(s.query,"");c.query=S(d,e);const p=i.ZP.fromNewQueryWithLocation(c,t);return p.additionalConditions.addFilterValues("event.type",["transaction"]),p.additionalConditions.addFilterValues("transaction.op",["pageload"]),p}function b(t,e,r){const{query:s}=t,a=s.start&&s.end,c={id:void 0,name:(0,o.t)("Performance"),query:"event.type:transaction",projects:[],fields:["team_key_transaction","transaction","project","transaction.op","tpm()","p50(transaction.duration)","p75(transaction.duration)","p95(transaction.duration)","count_unique(user)","count_miserable(user)","user_misery()"],version:2},u=Array(c.fields.length).fill(n.z7);u[c.fields.length-1]="110",c.widths=u,s.statsPeriod||a||(c.range=g(r)),c.orderby=(0,l.ro)(s.sort,"-tpm");const d=(0,l.ro)(s.query,"");c.query=S(d,e);const p=i.ZP.fromNewQueryWithLocation(c,t);return p.additionalConditions.addFilterValues("event.type",["transaction"]),p}function j(t,e){let{isTrends:r=!1,withStaticFilters:n=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3?arguments[3]:void 0;const a=T(t,n,s);if(r)return a;const o=(0,p.Q_)(t,e,a);switch(o?.field){case p.BY.FRONTEND_PAGELOAD:return E(t,n,s);case p.BY.FRONTEND_OTHER:return b(t,n,s);case p.BY.BACKEND:return x(t,n,s);case p.BY.MOBILE:return P(t,e,a,n,s);default:return a}}function q(t,e){const{query:r}=t,n=(0,m.iF)(t),s=r.start&&r.end,a={id:void 0,name:(0,o.t)("Vitals Performance Details"),query:"event.type:transaction",projects:[],fields:["team_key_transaction","transaction","project","count_unique(user)","count()",`p50(${n})`,`p75(${n})`,`p95(${n})`,(0,m.Ve)(n),(0,m.q4)(n)],version:2,yAxis:[`p75(${n})`]};r.statsPeriod||s||(a.range=g(e)),a.orderby=(0,l.ro)(r.sort,"-count");const c=(0,l.ro)(r.query,"");a.query=S(c,!1);const u=i.ZP.fromNewQueryWithLocation(a,t);return u.additionalConditions.addFilterValues("event.type",["transaction"]),u.additionalConditions.addFilterValues("has",[n]),u}},"./app/views/performance/landing/utils.tsx":(t,e,r)=>{r.d(e,{BY:()=>m,Cf:()=>y,Lx:()=>f,NJ:()=>v,Oo:()=>w,Q_:()=>g,TT:()=>_,ZR:()=>S,hv:()=>A,kP:()=>h}),r("../node_modules/core-js/modules/es.array.push.js"),r("../node_modules/core-js/modules/es.array.includes.js");var n=r("../node_modules/react-router/es/index.js"),s=r("../node_modules/lodash/omit.js"),a=r.n(s),o=r("./app/locale.tsx"),i=r("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),c=r("./app/utils/formatters.tsx"),l=r("./app/utils/queryString.tsx"),u=r("./app/utils/tokenizeSearch.tsx"),d=r("./app/views/performance/data.tsx"),p=r("./app/views/performance/utils.tsx");let m;!function(t){t.ALL="all",t.FRONTEND_PAGELOAD="frontend_pageload",t.FRONTEND_OTHER="frontend_other",t.BACKEND="backend",t.MOBILE="mobile"}(m||(m={}));const f=[{label:(0,o.t)("All Transactions"),field:m.ALL},{label:(0,o.t)("Web Vitals"),field:m.FRONTEND_PAGELOAD},{label:(0,o.t)("Frontend"),field:m.FRONTEND_OTHER},{label:(0,o.t)("Backend"),field:m.BACKEND},{label:(0,o.t)("Mobile"),field:m.MOBILE}];function h(t,e){const{eventView:r,location:s}=e,a=new u.MY(r.query);a.addFilterValues("!transaction",[`${t}`]),n.browserHistory.push({pathname:s.pathname,query:{...s.query,cursor:void 0,query:a.formatString()}})}function y(t){const e=(0,l.ro)(t?.query?.landingDisplay);return f.find((t=>{let{field:r}=t;return r===e}))}function _(t,e){const r=w(t,e);return f.find((t=>{let{field:e}=t;return e===r}))||f[0]}function g(t,e,r){return y(t)||_(e,r)}function v(t,e,r,s,o){const c=(0,l.ro)(e.query.query,""),d=new u.MY(c);d.removeFilter("transaction.op");const p={...a()(e.query,["landingDisplay","sort"]),query:d.formatString()};delete p.left,delete p.right;const m=w(r,o),f=g(e,r,o).field,h=m===t?{...p}:{...p,landingDisplay:t};(0,i.Z)("performance_views.landingv3.display_change",{organization:s,change_to_display:t,default_display:m,current_display:f,is_default:m===f}),n.browserHistory.push({pathname:e.pathname,query:h})}function w(t,e){if(!e)return m.ALL;const r=e.project;return{[p.iy.ANY]:m.ALL,[p.iy.FRONTEND]:m.FRONTEND_PAGELOAD,[p.iy.BACKEND]:m.BACKEND,[p.iy.MOBILE]:m.MOBILE}[(0,p.Bh)(t,r)]??m.ALL}const A=t=>({"p75(transaction.duration)":{title:(0,o.t)("Duration (p75)"),tooltip:(0,d.$r)(t,d.V$.P75),formatter:t=>(0,c.g9)(t/1e3,t>=1e3?3:0,!0)},"tpm()":{title:(0,o.t)("Throughput"),tooltip:(0,d.$r)(t,d.V$.THROUGHPUT),formatter:c.Du},"failure_rate()":{title:(0,o.t)("Failure Rate"),tooltip:(0,d.$r)(t,d.V$.FAILURE_RATE),formatter:t=>(0,c.rl)(t,2)},"apdex()":{title:(0,o.t)("Apdex"),tooltip:(0,d.$r)(t,d.V$.APDEX),formatter:t=>(0,c.$1)(t,4)},"p75(measurements.frames_slow_rate)":{title:(0,o.t)("Slow Frames (p75)"),tooltip:(0,d.$r)(t,d.V$.SLOW_FRAMES),formatter:t=>(0,c.rl)(t,2)},"p75(measurements.frames_frozen_rate)":{title:(0,o.t)("Frozen Frames (p75)"),tooltip:(0,d.$r)(t,d.V$.FROZEN_FRAMES),formatter:t=>(0,c.rl)(t,2)},"p75(measurements.app_start_cold)":{title:(0,o.t)("Cold Start (p75)"),tooltip:(0,d.$r)(t,d.V$.APP_START_COLD),formatter:t=>(0,c.g9)(t/1e3,t>=1e3?3:0,!0)},"p75(measurements.app_start_warm)":{title:(0,o.t)("Warm Start (p75)"),tooltip:(0,d.$r)(t,d.V$.APP_START_WARM),formatter:t=>(0,c.g9)(t/1e3,t>=1e3?3:0,!0)},"p75(measurements.stall_percentage)":{title:(0,o.t)("Stall Percentage (p75)"),tooltip:(0,d.$r)(t,d.V$.STALL_PERCENTAGE),formatter:t=>(0,c.rl)(t,2)}});function S(t){return Boolean(t.getFields().find((t=>t.includes("measurements.stall_percentage"))))}}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_data_tsx-app_views_performance_landing_utils_tsx.04f8f39d1d30623b0b7fdd419542729f.js.map