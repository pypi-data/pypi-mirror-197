"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_utils_replays_hooks_useReplayList_tsx-app_views_replays_replayTable_index_tsx-app_views_r-cb7c12"],{"./app/utils/replays/fetchReplayList.tsx":(e,t,s)=>{s.d(t,{Z:()=>i,y:()=>n});var r=s("../node_modules/@sentry/core/esm/exports.js"),a=s("./app/utils/replays/replayDataUtils.tsx");const n="-started_at",i=async function(e){let{api:t,organization:s,location:n,eventView:i}=e;try{const e=`/organizations/${s.slug}/replays/`,[{data:r},o,l]=await t.requestPromise(e,{includeAllArgs:!0,query:{...i.getEventsAPIPayload(n),cursor:n.query.cursor}});return{fetchError:void 0,pageLinks:l?.getResponseHeader("Link")??"",replays:r.map(a.qC)}}catch(e){return e.responseJSON?.detail?{fetchError:e.responseJSON.detail,pageLinks:null,replays:[]}:(r.Tb(e),{fetchError:e,pageLinks:null,replays:[]})}}},"./app/utils/replays/hooks/useReplayList.tsx":(e,t,s)=>{s.d(t,{Z:()=>i});var r=s("../node_modules/react/index.js"),a=s("./app/utils/replays/fetchReplayList.tsx"),n=s("./app/utils/useApi.tsx");const i=function(e){let{eventView:t,location:s,organization:i}=e;const o=(0,n.Z)(),[l,p]=(0,r.useState)({fetchError:void 0,isFetching:!0,pageLinks:null,replays:[]}),c=(0,r.useCallback)((async()=>{o.clear(),p((e=>({...e,isFetching:!0})));const e=await(0,a.Z)({api:o,organization:i,location:s,eventView:t});p({...e,isFetching:!1})}),[o,i,s,t]);return(0,r.useEffect)((()=>{c()}),[c]),l}},"./app/views/replays/replayTable/index.tsx":(e,t,s)=>{s.d(t,{Z:()=>H});var r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=s("../node_modules/react/index.js"),n=s("./app/components/alert.tsx"),i=s("./app/components/panels/index.tsx"),o=s("./app/locale.tsx"),l=s("./app/utils/discover/eventView.tsx"),p=s("./app/utils/getRouteStringFromRoutes.tsx"),c=s("./app/utils/useLocation.tsx"),d=s("./app/utils/useOrganization.tsx"),u=s("./app/utils/useRoutes.tsx"),y=s("./app/components/links/link.tsx"),m=s("./app/components/questionTooltip.tsx"),h=s("./app/icons/index.tsx"),g=s("./app/styles/space.tsx"),Z=s("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),x=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function f(e){const t=(0,c.T)(),s=(0,d.Z)();if(!("sort"in e)||!e.sort){const{label:t,tooltip:s}=e;return(0,x.BX)(v,{children:[t,s?(0,x.tZ)(w,{size:"xs",position:"top",title:s}):null]})}const{fieldName:r,label:a,sort:n,tooltip:i}=e,o="asc"===n?.kind?"up":"down",l=(0,x.tZ)(h.CC,{color:"gray300",size:"xs",direction:o});return(0,x.BX)(v,{children:[(0,x.BX)(b,{role:"columnheader","aria-sort":n?.field.endsWith(r)?"asc"===n?.kind?"ascending":"descending":"none",onClick:()=>{const e=n?.field.endsWith(r)&&"desc"===n?.kind?r:"-"+r;(0,Z.Z)("replay.list-sorted",{organization:s,column:e})},to:{pathname:t.pathname,query:{...t.query,sort:n?.field.endsWith(r)&&"desc"===n?.kind?r:"-"+r}},children:[a," ",n?.field===r&&l]}),i?(0,x.tZ)(w,{size:"xs",position:"top",title:i}):null]})}f.displayName="SortableHeader";const v=(0,r.Z)("div",{target:"e1shm7bh2"})({name:"1ydblpy",styles:"display:grid;grid-template-columns:repeat(2, max-content);align-items:center"}),b=(0,r.Z)(y.Z,{target:"e1shm7bh1"})({name:"1qowyn7",styles:"color:inherit;:hover{color:inherit;}svg{vertical-align:top;}"}),w=(0,r.Z)(m.Z,{target:"e1shm7bh0"})("margin-left:",(0,g.D)(.5),";"),_=f;var j=s("./app/views/replays/replayTable/types.tsx");const k=function(e){let{column:t,sort:s}=e;switch(t){case j.M.session:return(0,x.tZ)(_,{label:(0,o.t)("Session")});case j.M.projectId:return(0,x.tZ)(_,{sort:s,fieldName:"project_id",label:(0,o.t)("Project")});case j.M.slowestTransaction:return(0,x.tZ)(_,{label:(0,o.t)("Slowest Transaction"),tooltip:(0,o.t)("Slowest single instance of this transaction captured by this session.")});case j.M.startedAt:return(0,x.tZ)(_,{sort:s,fieldName:"started_at",label:(0,o.t)("Start Time")});case j.M.duration:return(0,x.tZ)(_,{sort:s,fieldName:"duration",label:(0,o.t)("Duration")});case j.M.countErrors:return(0,x.tZ)(_,{sort:s,fieldName:"count_errors",label:(0,o.t)("Errors")});case j.M.activity:return(0,x.tZ)(_,{sort:s,fieldName:"activity",label:(0,o.t)("Activity"),tooltip:(0,o.t)("Activity represents how much user activity happened in a replay. It is determined by the number of errors encountered, duration, and UI events.")});default:return null}};var z=s("./app/components/duration.tsx"),E=s("./app/components/idBadge/projectBadge.tsx"),T=s("./app/components/idBadge/userBadge.tsx"),C=s("./app/components/replays/walker/urlWalker.tsx"),S=s("./app/components/scoreBar.tsx"),N=s("./app/components/timeSince.tsx"),A=s("./app/constants/chartPalette.tsx"),M=s("./app/utils/discover/fieldRenderers.tsx"),L=s("./app/utils/useProjects.tsx");function B(e){let{eventView:t,organization:s,referrer:r,replay:a}=e;const{projects:n}=(0,L.Z)(),i=n.find((e=>e.id===a.project_id));return(0,x.tZ)(T.Z,{avatarSize:32,displayName:(0,x.tZ)(y.Z,{to:{pathname:`/organizations/${s.slug}/replays/${i?.slug}:${a.id}/`,query:{referrer:r,...t.generateQueryStringObject()}},children:a.user.display_name||""}),user:{username:a.user.display_name||"",email:a.user.email||"",id:a.user.id||"",ip_address:a.user.ip||"",name:a.user.username||""},displayEmail:(0,x.tZ)(C.j,{urls:a.urls})})}function q(e){let{replay:t}=e;const{projects:s}=(0,L.Z)(),r=s.find((e=>e.id===t.project_id));return(0,x.tZ)(F,{children:r?(0,x.tZ)(E.Z,{project:r,avatarSize:16}):null})}function R(e){let{organization:t,replay:s}=e;const r=(0,c.T)(),a="txEvent"in s,n=a?s.txEvent?.["transaction.duration"]:void 0;return a?(0,x.BX)(O,{children:[n?(0,x.BX)("div",{children:[n,"ms"]}):null,(0,M.as)(s.txEvent,{organization:t,location:r},{enableOnClick:!1})]}):null}function I(e){let{replay:t}=e;return(0,x.tZ)(F,{children:(0,x.tZ)(N.Z,{date:t.started_at})})}function P(e){let{replay:t}=e;return(0,x.tZ)(F,{children:(0,x.tZ)(z.Z,{seconds:t.duration.asSeconds(),exact:!0,abbreviation:!0})})}function V(e){let{replay:t}=e;return(0,x.tZ)(F,{"data-test-id":"replay-table-count-errors",children:t.count_errors||0})}function D(e){let{replay:t}=e;const s=new Array(10).fill([A.Z[0][0]]);return(0,x.tZ)(F,{children:(0,x.tZ)(S.Z,{size:20,score:t?.activity??1,palette:s,radius:0})})}B.displayName="SessionCell",q.displayName="ProjectCell",I.displayName="StartedAtCell",P.displayName="DurationCell",V.displayName="ErrorCountCell",D.displayName="ActivityCell";const F=(0,r.Z)("div",{target:"e28z4od1"})("display:flex;align-items:center;gap:",(0,g.D)(1),";"),O=(0,r.Z)("div",{target:"e28z4od0"})("width:100%;display:flex;flex-direction:column;gap:",(0,g.D)(.5),";color:",(e=>e.theme.gray500),";font-size:",(e=>e.theme.fontSizeMedium),";text-align:right;");function X(e){let{fetchError:t,isFetching:s,replays:r,sort:n,visibleColumns:i}=e;const y=(0,u.V)(),m=(0,c.T)(),h=(0,d.Z)(),g=i.map((e=>(0,x.tZ)(k,{column:e,sort:n},e)));if(t&&!s)return(0,x.tZ)(W,{headers:g,isLoading:!1,visibleColumns:i,children:(0,x.tZ)($,{type:"error",showIcon:!0,children:"string"==typeof t?t:(0,o.t)("Sorry, the list of replays could not be loaded. This could be due to invalid search parameters or an internal systems error.")})});const Z=(0,p.Z)(y),f=l.ZP.fromLocation(m);return(0,x.tZ)(W,{headers:g,isEmpty:0===r?.length,isLoading:s,visibleColumns:i,children:r?.map((e=>(0,x.tZ)(a.Fragment,{children:i.map((t=>{switch(t){case j.M.session:return(0,x.tZ)(B,{replay:e,eventView:f,organization:h,referrer:Z},"session");case j.M.projectId:return(0,x.tZ)(q,{replay:e},"projectId");case j.M.slowestTransaction:return(0,x.tZ)(R,{replay:e,organization:h},"slowestTransaction");case j.M.startedAt:return(0,x.tZ)(I,{replay:e},"startedAt");case j.M.duration:return(0,x.tZ)(P,{replay:e},"duration");case j.M.countErrors:return(0,x.tZ)(V,{replay:e},"countErrors");case j.M.activity:return(0,x.tZ)(D,{replay:e},"activity");default:return null}}))},e.id)))})}X.displayName="ReplayTable";const W=(0,r.Z)(i.KB,{target:"e14y06dl1"})("grid-template-columns:",(e=>e.visibleColumns.map((e=>"session"===e?"minmax(100px, 1fr)":"max-content")).join(" ")),";"),$=(0,r.Z)(n.bZ,{target:"e14y06dl0"})({name:"1uq1iuo",styles:"border-radius:0;border-width:1px 0 0 0;grid-column:1/-1;margin-bottom:0"}),H=X},"./app/views/replays/replayTable/types.tsx":(e,t,s)=>{let r;s.d(t,{M:()=>r}),function(e){e.activity="activity",e.countErrors="countErrors",e.duration="duration",e.projectId="projectId",e.session="session",e.slowestTransaction="slowestTransaction",e.startedAt="startedAt"}(r||(r={}))},"./app/views/replays/types.tsx":(e,t,s)=>{s.d(t,{p:()=>r});const r=["activity","count_errors","duration","finished_at","id","project_id","started_at","urls","user"]}}]);
//# sourceMappingURL=../sourcemaps/app_utils_replays_hooks_useReplayList_tsx-app_views_replays_replayTable_index_tsx-app_views_r-cb7c12.4703d84f57d1b2fe684c1338303f3ac6.js.map