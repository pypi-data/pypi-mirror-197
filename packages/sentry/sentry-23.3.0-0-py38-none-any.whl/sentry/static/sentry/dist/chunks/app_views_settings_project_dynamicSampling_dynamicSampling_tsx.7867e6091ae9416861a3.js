"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_settings_project_dynamicSampling_dynamicSampling_tsx"],{"./app/views/settings/organization/permissionAlert.tsx":(e,t,n)=>{n.d(t,{Z:()=>c});var i=n("./app/components/acl/access.tsx"),a=n("./app/components/alert.tsx"),o=n("./app/locale.tsx"),r=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function s(e){let{access:t=["org:write"],message:n=(0,o.t)("These settings can only be edited by users with the organization owner or manager role."),organization:s,...c}=e;return(0,r.tZ)(i.Z,{access:t,organization:s,children:e=>{let{hasAccess:t}=e;return!t&&(0,r.tZ)(a.bZ,{"data-test-id":"org-permission-alert",type:"warning",showIcon:!0,...c,children:n})}})}s.displayName="PermissionAlert";const c=s},"./app/views/settings/project/dynamicSampling/dynamicSampling.tsx":(e,t,n)=>{n.d(t,{f:()=>G,m:()=>X});var i=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(n("../node_modules/core-js/modules/es.array.includes.js"),n("../node_modules/react/index.js")),o=n("./app/actionCreators/indicator.tsx"),r=n("./app/components/button.tsx"),s=n("./app/components/featureBadge.tsx"),c=n("./app/components/forms/fields/booleanField.tsx"),l=n("./app/components/panels/index.tsx"),p=n("./app/components/sentryDocumentTitle.tsx"),d=n("./app/locale.tsx"),m=n("./app/stores/projectsStore.tsx"),u=n("./app/styles/space.tsx");let g;var h,b;!function(e){e.BOOST_ENVIRONMENTS="boostEnvironments",e.BOOST_LATEST_RELEASES="boostLatestRelease",e.BOOST_KEY_TRANSACTIONS="boostKeyTransactions",e.BOOST_LOW_VOLUME_TRANSACTIONS="boostLowVolumeTransactions",e.IGNORE_HEALTH_CHECKS="ignoreHealthChecks"}(g||(g={})),function(e){e.AND="and",e.OR="or"}(h||(h={})),function(e){e.TRACE="trace",e.TRANSACTION="transaction"}(b||(b={}));var y=n("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),x=n("./app/utils/handleXhrErrorResponse.tsx"),S=n("./app/utils/useApi.tsx"),f=n("../node_modules/lodash/noop.js"),v=n.n(f);let O;!function(e){e.Organization="organization",e.User="user"}(O||(O={})),[{key:"OnboardingNewFooterExperiment",type:O.Organization,parameter:"scenario",assignments:["baseline","variant1","variant2"]}].reduce(((e,t)=>({...e,[t.key]:t})),{});var _=n("./app/stores/hookStore.tsx");const w={experimentAssignment:-1,logExperiment:v()};var C,T=n("./app/utils/useOrganization.tsx"),Z=n("./app/views/settings/components/settingsPageHeader.tsx"),k=n("./app/views/settings/components/text/textBlock.tsx"),A=n("./app/views/settings/organization/permissionAlert.tsx"),E=n("./app/components/checkbox.tsx"),N=n("./app/components/featureFeedback/index.tsx"),z=n("./app/components/forms/index.tsx"),P=n("./app/components/forms/controls/textarea.tsx"),j=n("./app/components/forms/fieldGroup/index.tsx"),B=n("./app/stores/configStore.tsx"),R=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");!function(e){e.TRANSACTION_NAME="transaction_name",e.CUSTOM_TAG="custom_tag",e.OTHER="other"}(C||(C={}));const F={opinionAboutFeature:"",tracingCapturingPriorities:[{title:(0,d.t)("By transaction name"),value:C.TRANSACTION_NAME,checked:!1},{title:(0,d.t)("By custom tag"),value:C.CUSTOM_TAG,checked:!1},{title:(0,d.t)("Other"),value:C.OTHER,checked:!1}],tracingCapturingOtherPriority:""};function D(e){let{options:t,onChange:n,otherTextField:i}=e;const o=(0,a.useCallback)(((e,i)=>{const a=t.map((t=>t.value===e.value?{...t,checked:i}:t));n(a)}),[n,t]);return(0,R.tZ)(a.Fragment,{children:t.map((e=>"other"===e.value?(0,R.BX)(M,{children:[(0,R.tZ)(E.Z,{onChange:t=>o(e,t.target.checked)}),e.title,i]},e.value):(0,R.BX)(L,{children:[(0,R.tZ)(E.Z,{checked:e.checked,onChange:t=>o(e,t.target.checked)}),e.title]},e.value)))})}function H(){const e=`Dynamic Sampling feedback by ${B.Z.get("user").email}`;return(0,R.tZ)(N.z,{featureName:"dynamic-sampling",initialData:F,buttonProps:{priority:"primary",size:"sm"},children:t=>{let{Header:n,Body:i,Footer:o,state:r,onFieldChange:s}=t;return(0,R.BX)(a.Fragment,{children:[(0,R.tZ)(n,{children:(0,d.t)("Submit Feedback")}),(0,R.BX)(i,{showSelfHostedMessage:!1,children:[(0,R.tZ)(j.Z,{label:(0,R.tZ)(I,{children:(0,d.t)("What do you think about this feature?")}),stacked:!0,inline:!1,flexibleControlStateSize:!0,children:(0,R.tZ)(P.Z,{name:"opinion-about-feedback",value:r.opinionAboutFeature,rows:5,autosize:!0,onChange:e=>s("opinionAboutFeature",e.target.value)})}),(0,R.tZ)(j.Z,{label:(0,R.tZ)(I,{children:(0,d.t)("What other priorities would you like Sentry to apply for trace capturing?")}),stacked:!0,inline:!1,flexibleControlStateSize:!0,children:(0,R.tZ)(D,{options:r.tracingCapturingPriorities,onChange:e=>{e.some((e=>e.value===C.OTHER&&!1===e.checked))&&s("tracingCapturingOtherPriority",""),s("tracingCapturingPriorities",e)},otherTextField:(0,R.tZ)(V,{inline:!1,name:"tracingCapturingOtherPriority",flexibleControlStateSize:!0,stacked:!0,disabled:r.tracingCapturingPriorities.some((e=>e.value===C.OTHER&&!1===e.checked)),onClick:e=>e.stopPropagation(),value:r.tracingCapturingOtherPriority,onChange:e=>s("tracingCapturingOtherPriority",e),placeholder:(0,d.t)("Please let us know which other priority")})})})]}),(0,R.tZ)(o,{primaryDisabledReason:!r.opinionAboutFeature.trim()&&r.tracingCapturingPriorities.every((e=>!1===e.checked))?(0,d.t)("Please answer at least one question"):void 0,submitEventData:{contexts:{feedback:{opinionAboutFeature:r.opinionAboutFeature||null,tracingCapturingPriorities:r.tracingCapturingPriorities.filter((e=>e.checked)).map((e=>e.title)).join(", ")||null,tracingCapturingOtherPriority:r.tracingCapturingOtherPriority||null}},message:r.opinionAboutFeature.trim()?`${e} - ${r.opinionAboutFeature}`:e}})]})}})}D.displayName="MultipleCheckboxField",H.displayName="SamplingFeedback";const I=(0,i.Z)("strong",{target:"eltv75u3"})("margin-bottom:",(0,u.D)(1),";display:inline-block;"),L=(0,i.Z)("label",{target:"eltv75u2"})("cursor:pointer;display:grid;grid-template-columns:max-content 1fr;gap:",(0,u.D)(1),";align-items:center;:not(:last-child){margin-bottom:",(0,u.D)(1),";}"),M=(0,i.Z)(L,{target:"eltv75u1"})("grid-template-columns:max-content max-content 1fr;@media (max-width: ",(e=>e.theme.breakpoints.small),"){grid-template-columns:max-content 1fr;}"),V=(0,i.Z)(z.nv,{target:"eltv75u0"})("@media (max-width: ",(e=>e.theme.breakpoints.small),"){grid-column:1/-1;}&&{input{",(e=>e.disabled&&"cursor: pointer;"),";}}");var U=n("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js");const X={[g.BOOST_LATEST_RELEASES]:{label:(0,d.t)("Prioritize new releases"),help:(0,d.t)("Captures more transactions for your new releases as they are being adopted")},[g.BOOST_ENVIRONMENTS]:{label:(0,d.t)("Prioritize dev environments"),help:(0,d.t)('Captures more traces from environments that contain "dev", "test", "qa", and "local"')},[g.BOOST_KEY_TRANSACTIONS]:{label:(0,d.t)("Prioritize key transactions"),help:(0,d.t)("Captures more of your most important (starred) transactions")},[g.BOOST_LOW_VOLUME_TRANSACTIONS]:{label:(0,d.t)("Prioritize low-volume transactions"),help:(0,d.t)("Balance high-volume endpoints so they don't drown out low-volume ones")},[g.IGNORE_HEALTH_CHECKS]:{label:(0,d.t)("Deprioritize health checks"),help:(0,d.t)("Captures fewer of your health checks transactions")}};function G(e){let{project:t}=e;const n=(0,T.Z)(),i=(0,S.Z)(),{logExperiment:u,experimentAssignment:h}=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return _.Z.get("react-hook:use-experiment")[0]?.(...t)??w}("OnboardingNewFooterExperiment",{logExperimentOnMount:!1}),b=n.features.includes("dynamic-sampling-transaction-name-priority"),f=n.access.includes("project:write"),v=t.dynamicSamplingBiases??[];(0,a.useEffect)((()=>{n?.features.includes("onboarding-heartbeat-footer")&&u()}),[u,n?.features]),(0,a.useEffect)((()=>{(0,y.Z)("dynamic_sampling_settings.viewed",{organization:n,project_id:t.id})}),[t.id,n]);const O=(0,a.useCallback)((()=>{(0,y.Z)("dynamic_sampling_settings.read_docs_clicked",{organization:n,project_id:t.id})}),[n,t.id]);return(0,R.tZ)(p.Z,{title:(0,d.t)("Dynamic Sampling"),children:(0,R.BX)(a.Fragment,{children:[n?.features.includes("onboarding-heartbeat-footer")&&(0,R.BX)("div",{children:["The Heartbeat is active and you are participating in the experiment:  ","baseline"===h?"(Baseline) No change":"variant1"===h?"(Variant 1) New design with “Explore Sentry“ button disabled while “waiting for error“":"(Variant 2) New design with existing “View Sample Error“ button instead while “waiting for error“"]}),(0,R.tZ)(Z.Z,{title:(0,R.BX)(a.Fragment,{children:[(0,d.t)("Dynamic Sampling")," ",(0,R.tZ)(s.Z,{type:"new"})]}),action:(0,R.tZ)(H,{})}),(0,R.tZ)(k.Z,{children:(0,d.t)("Sentry aims to capture the most valuable transactions in full detail, so you have the necessary data to resolve any performance issues.")}),(0,R.tZ)(A.Z,{organization:n,access:["project:write"],message:(0,d.t)("These settings can only be edited by users with the organization owner, manager, or admin role.")}),(0,R.BX)(l.s_,{children:[(0,R.tZ)(l.V9,{children:(0,d.t)("Sampling Priorities")}),(0,R.tZ)(l.N,{children:Object.entries(X).map((e=>{let[a,r]=e;const s=v.find((e=>e.id===a));return s&&(b||a!==g.BOOST_LOW_VOLUME_TRANSACTIONS)?(0,U.az)(c.Z,{...r,key:a,name:a,value:s.active,onChange:()=>async function(e){(0,o.E3)();const a=v.map((t=>t.id===e.id?{...t,active:!t.active}:t));try{const r=await i.requestPromise(`/projects/${n.slug}/${t.slug}/`,{method:"PUT",data:{dynamicSamplingBiases:a}});(0,y.Z)(e.active?"dynamic_sampling_settings.priority_disabled":"dynamic_sampling_settings.priority_enabled",{organization:n,project_id:t.id,id:e.id}),m.Z.onUpdateSuccess(r),(0,o.S9)((0,d.t)("Successfully updated dynamic sampling configuration"))}catch(e){const t=(0,d.t)("Unable to update dynamic sampling configuration");(0,x.Z)(t)(e),(0,o.Iw)(t)}}(s),disabled:!f,disabledReason:f?void 0:(0,d.t)("You do not have permission to edit this setting")}):null}))}),(0,R.tZ)(K,{children:(0,R.tZ)(r.zx,{href:"https://docs.sentry.io/product/data-management-settings/dynamic-sampling/",onClick:O,external:!0,children:(0,d.t)("Read Docs")})})]})]})})}G.displayName="DynamicSampling";const K=(0,i.Z)(l.jH,{target:"e1tzcbwq0"})("padding:",(0,u.D)(1.5)," ",(0,u.D)(2),";display:flex;align-items:center;justify-content:flex-end;")}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_project_dynamicSampling_dynamicSampling_tsx.fa1783c1ee18be59d2fa37840e9e718f.js.map