"use strict";(self.webpackChunk_jupyter_collaboration_extension=self.webpackChunk_jupyter_collaboration_extension||[]).push([[497],{9497:(e,t,r)=>{r.r(t),r.d(t,{default:()=>I});var o,a=r(8876),n=r(2914),s=r(868),i=r(5530),l=r(9948);!function(e){e.openPath="filebrowser:open-path"}(o||(o={}));const c={id:"@jupyter/collaboration-extension:defaultFileBrowser",provides:n.IDefaultFileBrowser,requires:[n.IFileBrowserFactory,s.ITranslator],optional:[a.IRouter,a.JupyterFrontEnd.ITreeResolver,a.ILabShell,i.ISettingRegistry],activate:async(e,t,r,o,a,n,s)=>{const{commands:i}=e,c=r.load("jupyter_collaboration"),u=new l.YDrive(e.serviceManager.user,c);e.serviceManager.contents.addDrive(u);const w=t.createFileBrowser("filebrowser",{auto:!1,restore:!1,driveName:"YDrive"});return d.restoreBrowser(w,i,o,a,n),s&&s.load("@jupyterlab/notebook-extension:tracker").then((e=>{const t=e=>{var t;const r=null==e?void 0:e.get("experimentalEnableDocumentWideUndoRedo").composite;u.sharedModelFactory.setDocumentOptions("notebook",{disableDocumentWideUndoRedo:null===(t=!r)||void 0===t||t})};t(e),e.changed.connect((e=>t(e)))})),w}};var d;!function(e){e.restoreBrowser=async function(e,t,r,a,n){const s="jp-mod-restoring";if(e.addClass(s),!r)return await e.model.restore(e.id),await e.model.refresh(),void e.removeClass(s);const i=async()=>{r.routed.disconnect(i);const l=await(null==a?void 0:a.paths);(null==l?void 0:l.file)||(null==l?void 0:l.browser)?(await e.model.restore(e.id,!1),l.file&&await t.execute(o.openPath,{path:l.file,dontShowBrowser:!0}),l.browser&&await t.execute(o.openPath,{path:l.browser,dontShowBrowser:!0})):(await e.model.restore(e.id),await e.model.refresh()),e.removeClass(s),(null==n?void 0:n.isEmpty("main"))&&t.execute("launcher:create")};r.routed.connect(i)}}(d||(d={}));var u=r(7639),w=r(8146),p=r(6379),v=r(2014),b=r(4753),m=r(1644),h=r(6587),y=r(981),f=r(6493),g=r(7099);const I=[c,{id:"@jupyter/collaboration-extension:userMenu",autoStart:!0,requires:[],provides:w.IUserMenu,activate:e=>{const{commands:t}=e,{user:r}=e.serviceManager;return new w.UserMenu({commands:t,user:r})}},{id:"@jupyter/collaboration-extension:userMenuBar",autoStart:!0,requires:[w.IUserMenu],activate:async(e,t)=>{const{shell:r}=e,{user:o}=e.serviceManager,a=new v.MenuBar({forceItemsPosition:{forceX:!1,forceY:!1},renderer:new w.RendererUserMenu(o)});a.id="jp-UserMenu",o.userChanged.connect((()=>a.update())),a.addMenu(t),r.add(a,"top",{rank:1e3})}},{id:"@jupyter/collaboration-extension:rtcGlobalAwareness",autoStart:!0,requires:[h.IStateDB],provides:w.IGlobalAwareness,activate:(e,t)=>{const{user:r}=e.serviceManager,o=new y.Doc,a=new f.GL(o),n=m.ServerConnection.makeSettings(),s=b.URLExt.join(n.wsUrl,"api/yjs");new g.WebsocketProvider(s,"JupyterLab:globalAwareness",o,{awareness:a});const i=()=>{a.setLocalStateField("user",r.identity)};return r.isReady&&i(),r.ready.then(i).catch((e=>console.error(e))),r.userChanged.connect(i),t.changed.connect((async()=>{var e,r;const o=(null===(r=null===(e=(await t.toJSON())["layout-restorer:data"])||void 0===e?void 0:e.main)||void 0===r?void 0:r.current)||"";o.startsWith("editor")||o.startsWith("notebook")?a.setLocalStateField("current",o):a.setLocalStateField("current",null)})),a}},{id:"@jupyter/collaboration-extension:rtcPanel",autoStart:!0,requires:[w.IGlobalAwareness,s.ITranslator],activate:(e,t,r)=>{const{user:o}=e.serviceManager,a=r.load("jupyter_collaboration"),n=new p.SidePanel;n.id=u.DOMUtils.createDomID(),n.title.icon=p.usersIcon,n.title.caption=a.__("Collaboration"),n.addClass("jp-RTCPanel"),e.shell.add(n,"left",{rank:300});const s=new w.UserInfoPanel(o);s.title.label=a.__("User info"),s.title.caption=a.__("User information"),n.addWidget(s);const i=new w.CollaboratorsPanel(o,t,(t=>{e.commands.execute("docmanager:open",{path:t})}));i.title.label=a.__("Online Collaborators"),n.addWidget(i)}}]}}]);