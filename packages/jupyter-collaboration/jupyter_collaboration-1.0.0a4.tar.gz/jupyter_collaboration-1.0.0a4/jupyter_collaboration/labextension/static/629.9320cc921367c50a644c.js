"use strict";(self.webpackChunk_jupyter_collaboration_extension=self.webpackChunk_jupyter_collaboration_extension||[]).push([[629,847],{847:(e,s,t)=>{t.r(s),t.d(s,{CollaboratorsBody:()=>C,CollaboratorsPanel:()=>I,IGlobalAwareness:()=>n,IUserMenu:()=>a,RendererUserMenu:()=>c,UserInfoBody:()=>m,UserInfoPanel:()=>p,UserMenu:()=>u});var r=t(1791);const a=new r.Token("@jupyter/collaboration:IUserMenu"),n=new r.Token("@jupyter/collaboration:IGlobalAwareness");var o=t(6379),i=t(2014),l=t(1894);class c extends i.MenuBar.Renderer{constructor(e){super(),this._user=e}renderItem(e){const s=this.createItemClass(e),t=this.createItemDataset(e),r=this.createItemARIA(e);return l.h.li({className:s,dataset:t,tabindex:"0",onfocus:e.onfocus,...r},this._createUserIcon(),this.renderLabel(e),this.renderIcon(e))}renderLabel(e){const s=this.formatLabel(e);return l.h.div({className:"lm-MenuBar-itemLabel jp-MenuBar-label"},s)}_createUserIcon(){return this._user.isReady&&this._user.identity.avatar_url?l.h.div({className:"lm-MenuBar-itemIcon jp-MenuBar-imageIcon"},l.h.img({src:this._user.identity.avatar_url})):this._user.isReady?l.h.div({className:"lm-MenuBar-itemIcon jp-MenuBar-anonymousIcon",style:{backgroundColor:this._user.identity.color}},l.h.span({},this._user.identity.initials)):l.h.div({className:"lm-MenuBar-itemIcon jp-MenuBar-anonymousIcon"},o.userIcon)}}class u extends i.Menu{constructor(e){super(e)}}var d=t(7639),h=t(6029);const _=e=>{const{user:s}=e;return h.createElement("div",{className:"jp-UserInfo-Container"},h.createElement("div",{title:s.display_name,className:"jp-UserInfo-Icon",style:{backgroundColor:s.color}},h.createElement("span",null,s.initials)),h.createElement("h3",null,s.display_name))};class p extends i.Panel{constructor(e){super({}),this.addClass("jp-UserInfoPanel"),this._profile=e,this._body=null,this._profile.isReady?(this._body=new m(this._profile.identity),this.addWidget(this._body),this.update()):this._profile.ready.then((()=>{this._body=new m(this._profile.identity),this.addWidget(this._body),this.update()})).catch((e=>console.error(e)))}}class m extends d.ReactWidget{constructor(e){super(),this._user=e}get user(){return this._user}set user(e){this._user=e,this.update()}render(){return h.createElement(_,{user:this._user})}}var b=t(4753);const y="jp-Collaborator";class I extends i.Panel{constructor(e,s,t){super({}),this._onAwarenessChanged=()=>{const e=this._awareness.getStates(),s=[];e.forEach(((e,t)=>{this._currentUser.isReady&&e.user.name!==this._currentUser.identity.name&&s.push(e)})),this._body.collaborators=s},this._awareness=s,this._currentUser=e,this._body=new C(t),this.addWidget(this._body),this.update(),this._awareness.on("change",this._onAwarenessChanged)}}class C extends d.ReactWidget{constructor(e){super(),this._collaborators=[],this._fileopener=e,this.addClass("jp-CollaboratorsList")}get collaborators(){return this._collaborators}set collaborators(e){this._collaborators=e,this.update()}render(){return this._collaborators.map(((e,s)=>{let t=!1,r="",a="",n="";e.current&&(t=!0,n=e.current.split(":")[1],r=b.PathExt.basename(n),r=r.length>25?r.slice(0,12).concat("…"):r,a="•");const o=`${e.user.display_name} ${a} ${r}`;return h.createElement("div",{className:t?`jp-ClickableCollaborator ${y}`:y,key:s,onClick:()=>{t&&this._fileopener(n)}},h.createElement("div",{className:"jp-CollaboratorIcon",style:{backgroundColor:e.user.color}},h.createElement("span",null,e.user.initials)),h.createElement("span",null,o))}))}}}}]);