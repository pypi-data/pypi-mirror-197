import{P as j}from"./ListviewItem.vue_vue_type_script_setup_true_lang.6486c71a.js";import{d as A,a as r,b as U,r as P,N as E,f as S,e as D,E as G,J as Y,s as h,c as q,o as a,l as d,w as n,h as s,k as m,p as y,i as p,v as u,F as L,n as w,m as J,j as g,q as F,I as N}from"./index.a30f9374.js";import{_ as T,b as R}from"./MediaItemThumb.vue_vue_type_style_index_0_lang.aaf7ce1a.js";import{g as K,a as O}from"./ItemsListing.2a9952f4.js";import{b as Q,V as W,a as X}from"./VCardText.8356876e.js";import{a as Z,V as b}from"./VCardTitle.a21137d9.js";import{u as _,a as x,V as B,T as ee}from"./VBtn.ef3d72f5.js";import{a as te,V as ie}from"./VTooltip.96c48329.js";import{V as z}from"./VCard.10f880bf.js";import{b as ae,c as ne}from"./layout.8cdf39f2.js";import{b as re}from"./VSelect.c2525d1b.js";const H=A({name:"VLayout",props:ae(),setup(e,l){let{slots:f}=l;const{layoutClasses:k,layoutStyles:V,getLayoutItem:$,items:C,layoutRef:I}=ne(e);return _(()=>{var v;return r("div",{ref:I,class:k.value,style:V.value},[(v=f.default)==null?void 0:v.call(f)])}),{getLayoutItem:$,items:C}}}),le={key:0,xs5:"","pa-5":""},me={key:0},oe={key:1},se={key:2},de={style:{"padding-bottom":"10px"}},ue=["onClick"],ce={style:{color:"primary"}},ye={style:{display:"flex","margin-left":"14px","padding-bottom":"10px"}},ge=["innerHTML"],fe={key:1,class:"justify-center",style:{"margin-left":"15px","padding-bottom":"20px"}},pe={style:{position:"absolute",float:"right",right:"15px",top:"15px"}},Be=U({__name:"InfoHeader",props:{item:null},setup(e){const l=e,f=P(!1),k=P(),{mobile:V}=E(),$=new URL(""+new URL("info_gradient.a4aefd1d.jpg",import.meta.url).href,self.location).href;S();const C=D();G(()=>l.item,async t=>{t&&(h.topBarTitle=t.name,k.value=await R(l.item,N.FANART)||await R(l.item,N.THUMB),h.topBarContextMenuItems=O([t],t))},{immediate:!0}),Y(()=>{h.topBarContextMenuItems=[]});const I=function(t){C.push({name:"album",params:{itemId:t.item_id,provider:t.provider}})},v=function(t){console.log("artistClick",t),C.push({name:"artist",params:{itemId:t.item_id,provider:t.provider}})},M=q(()=>{let t="";if(!l.item)return"";l.item.metadata&&l.item.metadata.description?t=l.item.metadata.description:l.item.metadata&&l.item.metadata.copyright?t=l.item.metadata.copyright:"artists"in l.item&&l.item.artists.forEach(function(i){"metadata"in i&&i.metadata.description&&(t=i.metadata.description)});const o=V.value?160:260;return t=t.replace(`\r
`,"<br /><br /><br />"),t=t.replace("\r","<br /><br />"),t=t.replace(`
`,"<br /><br />"),f.value?t:t.length>o?t.substring(0,o)+"...":t});return(t,o)=>(a(),d("div",null,[r(z,{variant:"flat",img:g($),style:{"margin-top":"-10px","z-index":"0"},height:"30vh","max-height":"500px","min-height":"340px"},{default:n(()=>[e.item?m("",!0):(a(),s(ee,{key:0,indeterminate:""})),r(Q,{width:"100%",height:"100%",cover:"",class:"background-image",src:k.value,gradient:t.$vuetify.theme.current.dark?"to bottom, rgba(0,0,0,.90), rgba(0,0,0,.75)":"to bottom, rgba(255,255,255,.90), rgba(255,255,255,.75)"},null,8,["src","gradient"]),e.item?(a(),s(H,{key:1,style:{margin:"0",position:"absolute",top:"50%","-ms-transform":"translateY(-50%)",transform:"translateY(-50%)","padding-left":"15px","align-items":"center","padding-right":"15px"}},{default:n(()=>[t.$vuetify.display.mobile?m("",!0):(a(),d("div",le,["artists"in e.item&&e.item.media_type?(a(),d("div",me,[r(T,{item:e.item,"min-size":192,style:{"margin-top":"15px","margin-bottom":"15px","margin-right":"24px"}},null,8,["item"])])):"owner"in e.item&&e.item.media_type?(a(),d("div",oe,[r(T,{item:e.item,"min-size":192,style:{"margin-top":"15px","margin-bottom":"15px","margin-right":"24px"}},null,8,["item"])])):(a(),d("div",se,[r(T,{item:e.item,tile:!1,"min-size":192,style:{"margin-top":"15px","margin-bottom":"15px","margin-right":"24px"}},null,8,["item"])]))])),y("div",null,[r(Z,null,{default:n(()=>[p(u(e.item.name),1)]),_:1}),y("div",de,["version"in e.item&&e.item.version?(a(),s(b,{key:0,class:"caption"},{default:n(()=>[p(u(e.item.version),1)]),_:1})):m("",!0),"artists"in e.item&&e.item.artists?(a(),s(b,{key:1,class:"title accent--text"},{default:n(()=>[r(x,{style:{"margin-left":"-3px","margin-right":"3px"},small:"",color:"primary",icon:"mdi-account-music"}),(a(!0),d(L,null,w(e.item.artists,(i,c)=>(a(),d("span",{key:i.item_id},[y("a",{style:{color:"accent"},onClick:be=>v(i)},u(i.name),9,ue),c+1<e.item.artists.length?(a(),d("span",{key:c,style:{color:"accent"}},u(" / "))):m("",!0)]))),128))]),_:1})):m("",!0),"artist"in e.item&&e.item.artist?(a(),s(b,{key:2,class:"title"},{default:n(()=>[r(x,{style:{"margin-left":"-3px","margin-right":"3px"},small:"",color:"primary",icon:"mdi-account-music"}),y("a",{onClick:o[0]||(o[0]=i=>v(e.item.artist))},u(e.item.artist.name),1)]),_:1})):m("",!0),"owner"in e.item&&e.item.owner?(a(),s(b,{key:3,class:"title"},{default:n(()=>[r(x,{color:"primary",style:{"margin-left":"-3px","margin-right":"3px"},small:"",icon:"mdi-account-music"}),y("a",ce,u(e.item.owner),1)]),_:1})):m("",!0),"album"in e.item&&e.item.album?(a(),s(b,{key:4},{default:n(()=>[r(x,{color:"primary",style:{"margin-left":"-3px","margin-right":"3px"},small:"",icon:"mdi-album"}),y("a",{style:{color:"secondary"},onClick:o[1]||(o[1]=i=>{var c;return I((c=e.item)==null?void 0:c.album)})},u(e.item.album.name),1)]),_:1})):m("",!0)]),y("div",ye,[r(te,{location:"bottom"},{activator:n(({props:i})=>{var c;return[r(B,J({color:"primary"},i,{"prepend-icon":"mdi-play-circle",disabled:!((c=g(h).selectedPlayer)!=null&&c.available)||g(h).blockGlobalPlayMenu}),{default:n(()=>[p(u(t.$t("play")),1)]),_:2},1040,["disabled"])]}),default:n(()=>[r(z,{"min-width":"300"},{default:n(()=>[r(ie,{lines:"one",density:"comfortable"},{default:n(()=>[(a(!0),d(L,null,w(g(K)([e.item]),i=>(a(),s(W,{key:i.label,title:t.$t(i.label,i.labelArgs),onClick:c=>i.action?i.action():""},{prepend:n(()=>[r(X,{style:{"padding-right":"10px"}},{default:n(()=>[r(x,{icon:i.icon},null,8,["icon"])]),_:2},1024)]),_:2},1032,["title","onClick"]))),128))]),_:1})]),_:1})]),_:1}),!t.$vuetify.display.mobile&&!e.item.in_library?(a(),s(B,{key:0,style:{"margin-left":"10px"},color:"primary",tile:"","prepend-icon":"mdi-heart-outline",onClick:o[2]||(o[2]=i=>g(F).addItemsToLibrary([e.item]))},{default:n(()=>[p(u(t.$t("add_library")),1)]),_:1})):m("",!0),!t.$vuetify.display.mobile&&e.item.in_library?(a(),s(B,{key:1,style:{"margin-left":"10px"},color:"primary",tile:"","prepend-icon":"mdi-heart",onClick:o[3]||(o[3]=i=>g(F).removeItemsFromLibrary([e.item]))},{default:n(()=>[p(u(t.$t("remove_library")),1)]),_:1})):m("",!0)]),g(M)?(a(),s(b,{key:0,class:"body-2 justify-left",style:{"padding-bottom":"10px","white-space":"pre-line",cursor:"pointer"},onClick:o[4]||(o[4]=i=>f.value=!f.value)},{default:n(()=>[y("div",{innerHTML:g(M)},null,8,ge)]),_:1})):m("",!0),e.item&&e.item.metadata.genres?(a(),d("div",fe,[(a(!0),d(L,null,w(e.item.metadata.genres,i=>(a(),s(re,{key:i,color:"blue-grey lighten-1",style:{"margin-right":"5px","margin-bottom":"5px"},small:"",outlined:""},{default:n(()=>[p(u(i),1)]),_:2},1024))),128))])):m("",!0)])]),_:1})):m("",!0),e.item?(a(),s(H,{key:2,style:{"z-index":"800",height:"100%","padding-left":"15px"}},{default:n(()=>[y("div",pe,[r(j,{"provider-mappings":e.item.provider_mappings,height:25,"enable-link":!0},null,8,["provider-mappings"])])]),_:1})):m("",!0)]),_:1},8,["img"])]))}});export{Be as _};
