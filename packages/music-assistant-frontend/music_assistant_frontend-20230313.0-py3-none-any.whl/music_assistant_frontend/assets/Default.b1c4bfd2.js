import{g as Ge,r as P,u as Pe,c as C,t as K,a as o,m as Y,d as te,b as F,e as Be,f as Qe,o as f,h as S,w as r,i as D,j as e,s as w,k as R,l as A,n as oe,F as J,p as T,q as b,v as k,x as re,y as Ze,T as Ie,z as Xe,A as Ke,B as Z,P as Je,C as pe,D as fe,E as j,M as de,G as Me,I as Ae,H as ie,J as Ee,K as et,L as ze,N as tt,O as at,Q as nt,R as lt,S as it,_ as ot,U as st}from"./index.a30f9374.js";import{u as G,V as I,a as E,b as Le,m as ue,c as De,d as Ne,e as We,f as me,g as qe,h as Oe,i as Ue,j as rt,k as ut,t as dt}from"./VBtn.ef3d72f5.js";import{V as ee,a as se,b as ct,c as mt}from"./VTooltip.96c48329.js";import{V as H,a as vt,b as ce}from"./VCardText.8356876e.js";import{m as pt,f as ft,V as yt,a as Ce}from"./VToolbar.d3934ab2.js";import{m as ye,u as ge,a as gt,b as ht,c as _t}from"./layout.8cdf39f2.js";/* empty css              */import{g as he,t as bt,_ as kt,a as wt,f as xe,b as Ve}from"./MediaItemThumb.vue_vue_type_style_index_0_lang.aaf7ce1a.js";import{V as ve,a as At,b as Ct,c as xt,d as Vt}from"./VExpansionPanel.f3e4274e.js";import{V as X}from"./VDivider.9475c70a.js";import{V as Tt,a as St}from"./VCardTitle.a21137d9.js";import{i as $t,a as Rt,g as Te,b as Pt}from"./ProviderIcons.vue_vue_type_style_index_0_scoped_c020fdb7_lang.49fb17b0.js";import{V as Se}from"./VCard.10f880bf.js";import{_ as Bt}from"./_plugin-vue_export-helper.cdc0426e.js";import"./VLabel.f08a1283.js";const It=Ge()({name:"VAppBar",props:{modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:t=>["top","bottom"].includes(t)},...pt(),...ye(),height:{type:[Number,String],default:64}},emits:{"update:modelValue":t=>!0},setup(t,u){let{slots:m}=u;const s=P(),n=Pe(t,"modelValue"),a=C(()=>{var l,c;var p,g;const i=(l=(p=s.value)==null?void 0:p.contentHeight)!=null?l:0,v=(c=(g=s.value)==null?void 0:g.extensionHeight)!=null?c:0;return i+v}),{layoutItemStyles:d}=ge({id:t.name,order:C(()=>parseInt(t.order,10)),position:K(t,"location"),layoutSize:a,elementSize:a,active:n,absolute:K(t,"absolute")});return G(()=>{const[p]=ft(t);return o(yt,Y({ref:s,class:["v-app-bar",{"v-app-bar--bottom":t.location==="bottom"}],style:{...d.value,height:void 0}},p),m)}),{}}}),Mt=te({name:"VAppBarTitle",props:{...Ce.props},setup(t,u){let{slots:m}=u;return G(()=>o(Ce,{class:"v-app-bar-title"},m)),{}}}),Et={key:0,style:{opacity:"0.5"}},zt={class:"listitem-actions"},Lt={key:0},Dt={key:1},Nt=F({__name:"AppBar",setup(t){const u=Be();P(!1);const{t:m}=Qe(),s=[{label:"artists",icon:"mdi-account-music",path:"/artists"},{label:"albums",icon:"mdi-album",path:"/albums"},{label:"tracks",icon:"mdi-file-music",path:"/tracks"},{label:"radios",icon:"mdi-radio",path:"/radios"},{label:"playlists",icon:"mdi-playlist-music",path:"/playlists"},{label:"browse",icon:"mdi-folder",path:"/browse"},{label:"settings.settings",icon:"mdi-cog",path:"/settings"}],n=C(()=>{if(u.currentRoute.value.name=="home")return{mainTitle:m("mass"),subTitle:m("home")};if(u.currentRoute.value.path.includes("settings"))return{mainTitle:m("mass"),subTitle:m("settings.settings")};if(u.currentRoute.value.name!="home"&&!w.topBarTitle)return{mainTitle:m("mass"),mainLink:()=>{u.push({name:"home"})},subTitle:m(u.currentRoute.value.name.toString())};if(u.currentRoute.value.name!="home"&&w.topBarTitle){if(a.value&&u.currentRoute.value.path.includes(a.value.path))return{mainTitle:m(a.value.name.replace("home","mass")),mainLink:()=>{d()},subTitle:w.topBarTitle};const p=u.currentRoute.value.path.split("/")[1];return{mainTitle:m(p),mainLink:()=>{u.push(`/${p}`)},subTitle:w.topBarTitle}}return u.currentRoute.value?{mainTitle:m(u.currentRoute.value.name.toString())}:{mainTitle:m("mass")}}),a=C(()=>{if(w.prevRoutes.length>0)return w.prevRoutes[w.prevRoutes.length-1]}),d=function(){const p=w.prevRoutes.pop();p&&(p.params.backnav="true",u.replace(p).then(()=>{setTimeout(()=>{window.scrollTo(0,p.meta.scrollPos||0)},400)}))};return(p,g)=>(f(),S(It,{color:"grey-darken-3",density:"compact",style:{height:"56px"},elevation:2},{prepend:r(()=>[o(se,{location:"bottom end"},{activator:r(({props:i})=>[o(I,Y({style:{"margin-left":"-8px","margin-right":"-20px"}},i,{variant:"plain"}),{default:r(()=>[o(E,{size:"40"},{default:r(()=>[D(" mdi-playlist-play ")]),_:1})]),_:2},1040)]),default:r(()=>[o(ee,null,{default:r(()=>[e(w).prevRoutes.length>0?(f(),S(H,{key:0,title:p.$t("page_back"),"prepend-icon":"mdi-arrow-left",onClick:g[0]||(g[0]=i=>d())},null,8,["title"])):R("",!0),e(u).currentRoute.value.name!="home"?(f(),S(H,{key:1,title:p.$t("home"),"prepend-icon":"mdi-home",onClick:g[1]||(g[1]=i=>e(u).push({name:"home"}))},null,8,["title"])):R("",!0),(f(),A(J,null,oe(s,i=>o(H,{key:i.path,title:p.$t(i.label),"prepend-icon":i.icon,onClick:v=>e(u).push(i.path)},null,8,["title","prepend-icon","onClick"])),64))]),_:1})]),_:1})]),append:r(()=>[T("div",zt,[o(ct,{location:"top end",origin:"end center"},{activator:r(({props:i})=>[e(b).syncTasks.value.length>0||e(b).fetchesInProgress.value.length>0?(f(),S(Le,Y({key:0,indeterminate:""},i),null,16)):R("",!0)]),default:r(()=>[e(b).syncTasks.value.length>0?(f(),A("span",Lt,k(p.$t("sync_running")),1)):(f(),A("span",Dt,k(p.$t("loading")),1))]),_:1}),o(se,{location:"bottom end"},{activator:r(({props:i})=>[e(w).topBarContextMenuItems.length>0?(f(),S(I,Y({key:0,icon:"mdi-dots-vertical",style:{"margin-right":"-6px"}},i,{variant:"plain"}),null,16)):R("",!0)]),default:r(()=>[o(ee,null,{default:r(()=>[(f(!0),A(J,null,oe(e(w).topBarContextMenuItems,(i,v)=>(f(),S(H,{key:v,title:p.$t(i.label,i.labelArgs),onClick:l=>i.action?i.action():""},{prepend:r(()=>[o(vt,{icon:i.icon},null,8,["icon"])]),_:2},1032,["title","onClick"]))),128))]),_:1})]),_:1})])]),default:r(()=>[o(Mt,null,{default:r(()=>[T("span",{style:{cursor:"pointer"},onClick:g[2]||(g[2]=(...i)=>e(n).mainLink&&e(n).mainLink(...i))},k(e(n).mainTitle),1),e(n).subTitle?(f(),A("span",Et," | "+k(e(n).subTitle),1)):R("",!0)]),_:1})]),_:1}))}});const Wt=te({name:"VContainer",props:{fluid:{type:Boolean,default:!1},...ue()},setup(t,u){let{slots:m}=u;return G(()=>o(t.tag,{class:["v-container",{"v-container--fluid":t.fluid}]},m)),{}}});function He(){const t=P(!1);return re(()=>{window.requestAnimationFrame(()=>{t.value=!0})}),{ssrBootStyles:C(()=>t.value?void 0:{transition:"none !important"}),isBooted:Ze(t)}}const qt=te({name:"VMain",props:{scrollable:Boolean,...ue({tag:"main"})},setup(t,u){let{slots:m}=u;const{mainStyles:s}=gt(),{ssrBootStyles:n}=He();return G(()=>{var a,d;return o(t.tag,{class:["v-main",{"v-main--scrollable":t.scrollable}],style:[s.value,n.value]},{default:()=>[t.scrollable?o("div",{class:"v-main__scroller"},[(a=m.default)==null?void 0:a.call(m)]):(d=m.default)==null?void 0:d.call(m)]})}),{}}}),Ot=F({__name:"View",setup(t){return(u,m)=>{const s=Ke("router-view");return f(),S(qt,{id:"cont"},{default:r(()=>[o(Wt,{fluid:"",style:{padding:"0"}},{default:r(()=>[o(s,{app:""},{default:r(({Component:n})=>[o(Ie,{name:"fade",mode:"out-in"},{default:r(()=>[(f(),S(Xe(n)))]),_:2},1024)]),_:1})]),_:1})]),_:1})}}}),Ut=""+new URL("crossfade.ba51f69a.png",import.meta.url).href,Ht="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABgAAAAYADwa0LPAAAAnElEQVRYw+2UwQ6AMAhDwfjh+OXzZrgslqxjW8K7GWdtRqlIUYyh/qG1Zt8LVYuKzTDUnCGNy41zrfhpGRrhZgn5/HmiWdzuhsrQH7QMicjDENmuGKEbQjaotiwLaGSZeUIzZB2jhnwfAdqyzFAze+gXxPSZxcgaB6JDa+rUDLG2DNFJ3TLkzDlN3bveGWc83ZFlctTIKOVWFCt5AYSDaENMYFhMAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIyLTA0LTE1VDEzOjExOjE0KzAwOjAwADepDgAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMi0wNC0xNVQxMzoxMToxNCswMDowMHFqEbIAAAAASUVORK5CYII=",Yt={class:"text-body-2",style:{position:"absolute","margin-top":"3px"}},jt={class:"text-caption",style:{position:"absolute",width:"60px","text-align":"center","margin-left":"0px"}},Ft={class:"text-body-2"},Gt={class:"text-body-2",style:{position:"absolute","margin-top":"3px"}},Qt={key:0,class:"syncbtn"},Zt={key:1,class:"syncbtn"},Xt={class:"text-caption",style:{position:"absolute",width:"60px","text-align":"center","margin-left":"0px"}},Ye=F({__name:"VolumeControl",props:{player:null},setup(t){const u=function(s){var a;const n=[];s.type!=Je.GROUP&&n.push(s);for(const d of s.group_childs){const p=(a=b)==null?void 0:a.players[d];p&&p.available&&n.push(p)}return n.sort((d,p)=>d.display_name.toUpperCase()>p.display_name.toUpperCase()?1:-1),n},m=function(s,n){for(const a of u(s))for(const d of u(s))b.sendCommand("players/cmd/power",{player_id:d.player_id,powered:n})};return(s,n)=>(f(),S(ee,{style:{overflow:"hidden"},lines:"two"},{default:r(()=>[t.player.group_childs.length>0?(f(),A("div",{key:0,class:"volumerow",style:Z(t.player.powered?"opacity: 0.75":"opacity: 0.5")},[o(I,{icon:"",variant:"plain",width:"60",height:"30",size:"x-large",onClick:n[0]||(n[0]=a=>m(t.player,!t.player.powered))},{default:r(()=>[o(E,{icon:"mdi-power"})]),_:1}),T("span",Yt,k(e(he)(t.player,30)),1),T("div",jt,k(t.player.group_volume),1),o(ve,{lazy:"",density:"compact",step:"2","track-size":"2","thumb-size":"10","thumb-label":"",disabled:!t.player.powered,"model-value":Math.round(t.player.group_volume),style:{"margin-left":"5px"},"onUpdate:modelValue":n[1]||(n[1]=a=>e(b).playerCommandGroupVolume(t.player.player_id,a))},null,8,["disabled","model-value"])],4)):R("",!0),t.player.group_childs.length>0?(f(),S(X,{key:1,style:{"margin-top":"10px","margin-bottom":"10px"}})):R("",!0),(f(!0),A(J,null,oe(u(t.player),a=>(f(),A("div",{key:a.player_id,class:"volumerow",style:Z(a.powered?"opacity: 0.75":"opacity: 0.5")},[T("span",Ft,[o(I,{icon:"",variant:"plain",width:"60",height:"30",size:"x-large",onClick:d=>e(b).playerCommandPowerToggle(a.player_id)},{default:r(()=>[o(E,{icon:"mdi-power"})]),_:2},1032,["onClick"]),T("span",Gt,k(e(bt)(a.display_name,27)),1),!a.synced_to&&!a.group_childs.length&&Object.values(e(b).players).filter(d=>!d.synced_to&&d.can_sync_with.includes(a.player_id)).length>0?(f(),A("div",Qt,[o(se,{location:"bottom end",style:{"z-index":"999999"}},{activator:r(({props:d})=>[o(I,Y({icon:""},d,{variant:"plain"}),{default:r(()=>[o(E,null,{default:r(()=>[D("mdi-link-variant")]),_:1})]),_:2},1040)]),default:r(()=>[o(ee,null,{default:r(()=>[o(Tt,null,{default:r(()=>[D(k(s.$t("sync_player_to")),1)]),_:1}),(f(!0),A(J,null,oe(Object.values(e(b).players).filter(d=>!d.synced_to&&d.can_sync_with.includes(a.player_id)),d=>(f(),S(H,{key:d.player_id,title:d.display_name,onClick:p=>e(b).playerCommandSync(a.player_id,d.player_id)},null,8,["title","onClick"]))),128)),o(X)]),_:2},1024)]),_:2},1024)])):R("",!0),a.synced_to?(f(),A("div",Zt,[o(I,{icon:"",variant:"plain",onClick:d=>e(b).playerCommandUnSync(a.player_id)},{default:r(()=>[o(E,null,{default:r(()=>[D("mdi-link-variant-off")]),_:1})]),_:2},1032,["onClick"])])):R("",!0)]),T("div",Xt,k(a.volume_level),1),o(ve,{lazy:"",density:"compact",step:"2","track-size":"2","thumb-size":"10","thumb-label":"",disabled:!a.powered,"model-value":Math.round(a.volume_level),style:{"margin-left":"5px"},"onUpdate:modelValue":d=>e(b).playerCommandVolumeSet(a.player_id,d)},null,8,["disabled","model-value","onUpdate:modelValue"])],4))),128))]),_:1}))}});const Kt=te({name:"VFooter",props:{app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...De(),...Ne(),...ye(),...We(),...ue({tag:"footer"}),...pe()},setup(t,u){let{slots:m}=u;const{themeClasses:s}=fe(t),{backgroundColorClasses:n,backgroundColorStyles:a}=me(K(t,"color")),{borderClasses:d}=qe(t),{elevationClasses:p}=Oe(t),{roundedClasses:g}=Ue(t),i=P(32),{resizeRef:v}=rt(h=>{!h.length||(i.value=h[0].target.clientHeight)}),l=C(()=>t.height==="auto"?i.value:parseInt(t.height,10)),{layoutItemStyles:c}=ge({id:t.name,order:C(()=>parseInt(t.order,10)),position:C(()=>"bottom"),layoutSize:l,elementSize:C(()=>t.height==="auto"?void 0:l.value),active:C(()=>t.app),absolute:K(t,"absolute")});return G(()=>o(t.tag,{ref:v,class:["v-footer",s.value,n.value,d.value,p.value,g.value],style:[a.value,t.app?c.value:void 0]},m)),{}}}),Jt={class:"listitem-thumb"},ea={key:0},ta={key:1},aa={key:1},na={key:2},la={key:3},ia={key:4},oa={class:"listitem-actions"},sa={class:"text-h5",style:{padding:"10px"}},ra={style:{height:"50px",display:"flex","align-items":"center"}},ua=["src"],da={style:{height:"50px",display:"flex","align-items":"center"}},ca=["src"],ma={key:0,style:{height:"50px",display:"flex","align-items":"center"}},va={key:1,style:{height:"50px",display:"flex","align-items":"center"}},pa={key:1,class:"mediadetails-time text-caption"},fa={key:0,style:{width:"100%",height:"5px","padding-bottom":"20px","margin-top":"-10px"}},ya={class:"mediacontrols"},ga={key:0,class:"mediacontrols-left"},ha={key:0},_a={key:1},ba={class:"text-subtitle-1"},ka=F({__name:"PlayerOSD",setup(t){const u=Be(),m=P(),s=P(!1),n=C(()=>{if(w.selectedPlayer)return b.queues[w.selectedPlayer.active_queue]}),a=C(()=>{if(n.value)return n.value.current_item}),d=C(()=>a.value?xe(i.value):"0:00"),p=C(()=>{if(!a.value)return"0:00";const l=a.value.duration;return xe(l)}),g=C(()=>{var l,c;return(c=(l=n.value)==null?void 0:l.current_item)==null?void 0:c.streamdetails}),i=C(()=>n.value?n.value.elapsed_time:0),v=function(l){u.push({name:l.media_type,params:{itemId:l.item_id,provider:l.provider}})};return j(()=>{var l;return(l=a.value)==null?void 0:l.queue_item_id},async()=>{var l;(l=a.value)!=null&&l.media_item&&(m.value=await Ve(a.value.media_item,Ae.FANART)||await Ve(a.value.media_item,Ae.THUMB))}),(l,c)=>(f(),S(Kt,{bottom:"",fixed:"",class:"d-flex flex-column",style:{width:"100%","border-top-style":"ridge"},elevation:"5",app:""},{default:r(()=>{var h,V,$,W,O,q,z,U,x;return[o(X),o(ce,{class:"bg-image",width:"100%",cover:"",src:m.value,gradient:l.$vuetify.theme.current.dark?"to bottom, rgba(0,0,0,.80), rgba(0,0,0,.75)":"to bottom, rgba(255,255,255,.85), rgba(255,255,255,.65)",style:{position:"absolute","background-size":"100%",padding:"0","margin-top":"-10px"}},null,8,["src","gradient"]),o(H,{style:{height:"60px",width:"100%","margin-top":"-5px","padding-bottom":"30px","padding-top":"5px"},lines:"two"},{prepend:r(()=>[T("div",Jt,[e(a)?(f(),S(kt,{key:0,item:e(a).media_item||e(a),size:50,style:{cursor:"pointer"},onClick:c[0]||(c[0]=y=>{var _;return(_=e(a))!=null&&_.media_item?v(e(a).media_item):""})},null,8,["item"])):(f(),S(ce,{key:1,height:"50",src:e($t),style:{opacity:"50%"}},null,8,["src"]))])]),title:r(()=>[e(a)&&e(a).media_item?(f(),A("span",{key:0,style:{cursor:"pointer"},onClick:c[1]||(c[1]=y=>{var _;return(_=e(a))!=null&&_.media_item?v(e(a).media_item):""})},[D(k(e(a).media_item.name)+" ",1),"version"in e(a).media_item&&e(a).media_item.version?(f(),A("span",ea,"("+k(e(a).media_item.version)+")",1)):R("",!0)])):e(a)?(f(),A("span",ta,k(e(a).name),1)):R("",!0)]),subtitle:r(()=>{var y,_,B,L,M,ae,ne;return[e(a)&&((y=e(a).media_item)==null?void 0:y.media_type)==e(de).TRACK&&"album"in e(a).media_item&&e(a).media_item.album?(f(),A("div",{key:0,style:{cursor:"pointer"},onClick:c[2]||(c[2]=_e=>{var le;return(le=e(a))!=null&&le.media_item?v(e(a).media_item):""})},k(e(wt)(e(a).media_item.artists))+" \u2022 "+k(e(a).media_item.album.name),1)):e(a)&&e(a).media_item&&"artists"in e(a).media_item&&e(a).media_item.artists.length>0?(f(),A("div",aa,k(e(a).media_item.artists[0].name),1)):(B=(_=e(a))==null?void 0:_.streamdetails)!=null&&B.stream_title?(f(),A("div",na,k((M=(L=e(a))==null?void 0:L.streamdetails)==null?void 0:M.stream_title),1)):e(a)&&((ae=e(a).media_item)==null?void 0:ae.metadata.description)?(f(),A("div",la,k(e(a).media_item.metadata.description),1)):e(a)?R("",!0):(f(),A("div",ia,k((ne=e(n))==null?void 0:ne.display_name),1))]}),append:r(()=>{var y;return[T("div",oa,[e(g)?(f(),S(se,{key:0,location:"bottom end"},{activator:r(({props:_})=>[o(ce,Y({contain:"",src:e(g).bit_depth>16?e(Rt):e(Te)(e(g).content_type),height:"25",style:l.$vuetify.theme.current.dark?"":"filter: invert(100%)",class:"v-list-item-subtitle mediadetails-streamdetails"},_),null,16,["src","style"])]),default:r(()=>[o(Se,{class:"mx-auto",width:"300"},{default:r(()=>[o(ee,{style:{overflow:"hidden"}},{default:r(()=>[T("span",sa,k(l.$t("stream_details")),1),o(X),T("div",ra,[T("img",{height:"30",width:"50",center:"",src:e(Pt)(e(g).provider),style:{"object-fit":"contain"}},null,8,ua),D(" "+k(l.$t("providers."+e(g).provider)),1)]),T("div",da,[T("img",{height:"30",width:"50",src:e(Te)(e(g).content_type),style:Z(l.$vuetify.theme.current.dark?"object-fit: contain;":"object-fit: contain;filter: invert(100%);")},null,12,ca),D(" "+k(e(g).sample_rate/1e3)+" kHz / "+k(e(g).bit_depth)+" bits ",1)]),e(n)&&e(n).crossfade_enabled?(f(),A("div",ma,[T("img",{height:"30",width:"50",contain:"",src:Ut,style:Z(l.$vuetify.theme.current.dark?"object-fit: contain;":"object-fit: contain;filter: invert(100%);")},null,4),D(" "+k(l.$t("crossfade_enabled")),1)])):R("",!0),e(g).gain_correct?(f(),A("div",va,[T("img",{height:"30",width:"50",contain:"",src:Ht,style:Z(l.$vuetify.theme.current.dark?"object-fit: contain;":"object-fit: contain;filter: invert(100%);")},null,4),D(" "+k(e(g).gain_correct)+" dB ",1)])):R("",!0)]),_:1})]),_:1})]),_:1})):R("",!0),!l.$vuetify.display.mobile&&e(g)&&e(a)&&((y=e(a).media_item)==null?void 0:y.media_type)!==e(de).RADIO?(f(),A("div",pa,k(e(d))+" / "+k(e(p)),1)):R("",!0)])]}),_:1}),e(a)?(f(),A("div",fa,[o(ve,{"model-value":e(i),height:"3",color:"primary",min:0,max:e(a).duration,"thumb-size":4,style:{"margin-left":"0","margin-right":"0"},disabled:!e(a)||((h=e(a).media_item)==null?void 0:h.media_type)!=e(de).TRACK,"onUpdate:modelValue":c[3]||(c[3]=y=>{var _;return e(b).queueCommandSeek(((_=e(n))==null?void 0:_.queue_id)||"",Math.round(y))})},null,8,["model-value","max","disabled"])])):R("",!0),T("div",ya,[e(n)&&e(n).available?(f(),A("div",ga,[o(I,{small:"",icon:"",variant:"plain",disabled:!e(n)||!((V=e(n))!=null&&V.active)||(($=e(n))==null?void 0:$.items)==0,onClick:c[4]||(c[4]=y=>e(b).queueCommandPrevious(e(n).queue_id))},{default:r(()=>[o(E,{icon:"mdi-chevron-left"})]),_:1},8,["disabled"]),e(n)&&((W=e(n))==null?void 0:W.active)?(f(),S(I,{key:0,icon:"","x-large":"",variant:"plain",disabled:e(n)&&((O=e(n))==null?void 0:O.items)==0,onClick:c[5]||(c[5]=y=>e(b).queueCommandPlayPause(e(n).queue_id))},{default:r(()=>[o(E,{size:"50"},{default:r(()=>{var y;return[D(k(((y=e(n))==null?void 0:y.state)=="playing"?"mdi-pause":"mdi-play"),1)]}),_:1})]),_:1},8,["disabled"])):((q=e(w).selectedPlayer)==null?void 0:q.state)==e(Me).PLAYING?(f(),S(I,{key:1,icon:"","x-large":"",variant:"plain",onClick:c[6]||(c[6]=y=>e(b).queueCommandStop(e(n).queue_id))},{default:r(()=>[o(E,{size:"50"},{default:r(()=>[D(" mdi-stop ")]),_:1})]),_:1})):(f(),S(I,{key:2,icon:"","x-large":"",variant:"plain",disabled:e(n)&&((z=e(n))==null?void 0:z.items)==0,onClick:c[7]||(c[7]=y=>e(b).queueCommandPlay(e(n).queue_id))},{default:r(()=>[o(E,{size:"50"},{default:r(()=>[D(" mdi-play ")]),_:1})]),_:1},8,["disabled"])),o(I,{icon:"",small:"",variant:"plain",disabled:!e(n)||!((U=e(n))!=null&&U.active)||((x=e(n))==null?void 0:x.items)==0,onClick:c[8]||(c[8]=y=>e(b).queueCommandNext(e(n).queue_id))},{default:r(()=>[o(E,{icon:"mdi-chevron-right"})]),_:1},8,["disabled"])])):R("",!0),o(I,{icon:"",variant:"plain",class:"mediacontrols-right",height:"50",width:"80",onClick:c[9]||(c[9]=y=>e(w).showPlayersMenu=!0)},{default:r(()=>[o(E,{icon:"mdi-speaker"}),e(n)?(f(),A("div",ha,k(e(he)(e(b).players[e(n).queue_id])),1)):R("",!0)]),_:1}),!l.$vuetify.display.mobile&&e(n)?(f(),A("div",_a,[o(se,{modelValue:s.value,"onUpdate:modelValue":c[11]||(c[11]=y=>s.value=y),location:"bottom end","close-on-content-click":!1},{activator:r(({props:y})=>[o(I,Y({icon:"",variant:"plain"},y,{class:"mediacontrols-right",height:"50",width:"70"}),{default:r(()=>{var _;return[o(E,{icon:"mdi-volume-high"}),T("div",null,k(Math.round(((_=e(w).selectedPlayer)==null?void 0:_.group_volume)||0)),1)]}),_:2},1040)]),default:r(()=>[o(Se,{"min-width":"300"},{default:r(()=>[o(ee,{style:{overflow:"hidden"},lines:"two"},{default:r(()=>[o(H,{density:"compact"},{prepend:r(()=>[o(E,{size:"50",icon:e(w).selectedPlayer.group_childs.length>0?"mdi-speaker-multiple":"mdi-speaker",color:"accent",style:{"padding-left":"0px","padding-right":"0px","margin-left":"-10px","margin-right":"10px",width:"42px",height:"50px"}},null,8,["icon"])]),title:r(()=>{var y;return[T("div",ba,[T("b",null,k((y=e(w).selectedPlayer)==null?void 0:y.display_name.substring(0,25)),1)])]}),subtitle:r(()=>{var y,_;return[(f(),A("div",{key:(y=e(w).selectedPlayer)==null?void 0:y.state,class:"text-body-2",style:{"line-height":"1em"}},k(l.$t("state."+((_=e(w).selectedPlayer)==null?void 0:_.state))),1))]}),default:r(()=>[o(I,{variant:"plain",style:{position:"absolute",right:"0px",top:"0px"},icon:"mdi-close",dark:"",onClick:c[10]||(c[10]=y=>s.value=!s.value)})]),_:1}),o(X),e(w).selectedPlayer?(f(),S(Ye,{key:0,player:e(w).selectedPlayer},null,8,["player"])):R("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])])):R("",!0),e(n)?(f(),S(I,{key:2,text:"",icon:"",variant:"plain",class:"mediacontrols-right",height:"50",width:"70",onClick:c[12]||(c[12]=y=>l.$router.push("/playerqueue/"))},{default:r(()=>[o(E,{icon:"mdi-playlist-music"}),T("div",null,k(l.$t("queue")),1)]),_:1})):R("",!0)])]}),_:1}))}});const wa=Bt(ka,[["__scopeId","data-v-a88e22ad"]]);function Aa(t){let{rootEl:u,isSticky:m,layoutItemStyles:s}=t;const n=P(!1),a=P(0),d=C(()=>{const i=typeof n.value=="boolean"?"top":n.value;return[m.value?{top:"auto",bottom:"auto",height:void 0}:void 0,n.value?{[i]:ie(a.value)}:{top:s.value.top}]});re(()=>{j(m,i=>{i?window.addEventListener("scroll",g,{passive:!0}):window.removeEventListener("scroll",g)},{immediate:!0})}),Ee(()=>{document.removeEventListener("scroll",g)});let p=0;function g(){var V;const i=p>window.scrollY?"up":"down",v=u.value.getBoundingClientRect(),l=parseFloat((V=s.value.top)!=null?V:0),c=window.scrollY-Math.max(0,a.value-l),h=v.height+Math.max(a.value,l)-window.scrollY-window.innerHeight;v.height<window.innerHeight-l?(n.value="top",a.value=l):i==="up"&&n.value==="bottom"||i==="down"&&n.value==="top"?(a.value=window.scrollY+v.top,n.value=!0):i==="down"&&h<=0?(a.value=0,n.value="bottom"):i==="up"&&c<=0&&(a.value=v.top+c,n.value="top"),p=window.scrollY}return{isStuck:n,stickyStyles:d}}const Ca=100,xa=20;function $e(t){const u=1.41421356237;return(t<0?-1:1)*Math.sqrt(Math.abs(t))*u}function Re(t){if(t.length<2)return 0;if(t.length===2)return t[1].t===t[0].t?0:(t[1].d-t[0].d)/(t[1].t-t[0].t);let u=0;for(let m=t.length-1;m>0;m--){if(t[m].t===t[m-1].t)continue;const s=$e(u),n=(t[m].d-t[m-1].d)/(t[m].t-t[m-1].t);u+=(n-s)*Math.abs(n),m===t.length-1&&(u*=.5)}return $e(u)*1e3}function Va(){const t={};function u(n){Array.from(n.changedTouches).forEach(a=>{var p;((p=t[a.identifier])!=null?p:t[a.identifier]=new et(xa)).push([n.timeStamp,a])})}function m(n){Array.from(n.changedTouches).forEach(a=>{delete t[a.identifier]})}function s(n){var a;const d=(a=t[n])==null?void 0:a.values().reverse();if(!d)throw new Error(`No samples for touch id ${n}`);const p=d[0],g=[],i=[];for(const v of d){if(p[0]-v[0]>Ca)break;g.push({t:v[0],d:v[1].clientX}),i.push({t:v[0],d:v[1].clientY})}return{x:Re(g),y:Re(i),get direction(){const{x:v,y:l}=this,[c,h]=[Math.abs(v),Math.abs(l)];return c>h&&v>=0?"right":c>h&&v<=0?"left":h>c&&l>=0?"down":h>c&&l<=0?"up":Ta()}}}return{addMovement:u,endTouch:m,getVelocity:s}}function Ta(){throw new Error}function Sa(t){let{isActive:u,isTemporary:m,width:s,touchless:n,position:a}=t;re(()=>{window.addEventListener("touchstart",O,{passive:!0}),window.addEventListener("touchmove",q,{passive:!1}),window.addEventListener("touchend",z,{passive:!0})}),Ee(()=>{window.removeEventListener("touchstart",O),window.removeEventListener("touchmove",q),window.removeEventListener("touchend",z)});const d=C(()=>a.value!=="bottom"),{addMovement:p,endTouch:g,getVelocity:i}=Va();let v=!1;const l=P(!1),c=P(0),h=P(0);let V;function $(x,y){return(a.value==="left"?x:a.value==="right"?document.documentElement.clientWidth-x:a.value==="bottom"?document.documentElement.clientHeight-x:Q())-(y?s.value:0)}function W(x){let y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const _=a.value==="left"?(x-h.value)/s.value:a.value==="right"?(document.documentElement.clientWidth-x-h.value)/s.value:a.value==="bottom"?(document.documentElement.clientHeight-x-h.value)/s.value:Q();return y?Math.max(0,Math.min(1,_)):_}function O(x){if(n.value)return;const y=x.changedTouches[0].clientX,_=x.changedTouches[0].clientY,B=25,L=a.value==="left"?y<B:a.value==="right"?y>document.documentElement.clientWidth-B:a.value==="bottom"?_>document.documentElement.clientHeight-B:Q(),M=u.value&&(a.value==="left"?y<s.value:a.value==="right"?y>document.documentElement.clientWidth-s.value:a.value==="bottom"?_>document.documentElement.clientHeight-s.value:Q());(L||M||u.value&&m.value)&&(v=!0,V=[y,_],h.value=$(d.value?y:_,u.value),c.value=W(d.value?y:_),g(x),p(x))}function q(x){const y=x.changedTouches[0].clientX,_=x.changedTouches[0].clientY;if(v){if(!x.cancelable){v=!1;return}const L=Math.abs(y-V[0]),M=Math.abs(_-V[1]);(d.value?L>M&&L>3:M>L&&M>3)?(l.value=!0,v=!1):(d.value?M:L)>3&&(v=!1)}if(!l.value)return;x.preventDefault(),p(x);const B=W(d.value?y:_,!1);c.value=Math.max(0,Math.min(1,B)),B>1?h.value=$(d.value?y:_,!0):B<0&&(h.value=$(d.value?y:_,!1))}function z(x){if(v=!1,!l.value)return;p(x),l.value=!1;const y=i(x.changedTouches[0].identifier),_=Math.abs(y.x),B=Math.abs(y.y);(d.value?_>B&&_>400:B>_&&B>3)?u.value=y.direction===({left:"right",right:"left",bottom:"up"}[a.value]||Q()):u.value=c.value>.5}const U=C(()=>l.value?{transform:a.value==="left"?`translateX(calc(-100% + ${c.value*s.value}px))`:a.value==="right"?`translateX(calc(100% - ${c.value*s.value}px))`:a.value==="bottom"?`translateY(calc(100% - ${c.value*s.value}px))`:Q(),transition:"none"}:void 0);return{isDragging:l,dragProgress:c,dragStyles:U}}function Q(){throw new Error}const $a=["start","end","left","right","bottom"],Ra=te({name:"VNavigationDrawer",props:{color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:Boolean,railWidth:{type:[Number,String],default:56},scrim:{type:[String,Boolean],default:!0},image:String,temporary:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:t=>$a.includes(t)},sticky:Boolean,...De(),...Ne(),...ye(),...We(),...ue({tag:"nav"}),...pe()},emits:{"update:modelValue":t=>!0},setup(t,u){let{attrs:m,slots:s}=u;const{isRtl:n}=ze(),{themeClasses:a}=fe(t),{borderClasses:d}=qe(t),{backgroundColorClasses:p,backgroundColorStyles:g}=me(K(t,"color")),{elevationClasses:i}=Oe(t),{mobile:v}=tt(),{roundedClasses:l}=Ue(t),c=ut(),h=Pe(t,"modelValue",null,N=>!!N),{ssrBootStyles:V}=He(),$=P(),W=P(!1),O=C(()=>t.rail&&t.expandOnHover&&W.value?Number(t.width):Number(t.rail?t.railWidth:t.width)),q=C(()=>dt(t.location,n.value)),z=C(()=>!t.permanent&&(v.value||t.temporary)),U=C(()=>t.sticky&&!z.value&&q.value!=="bottom");t.disableResizeWatcher||j(z,N=>!t.permanent&&at(()=>h.value=!N)),!t.disableRouteWatcher&&c&&j(c.currentRoute,()=>z.value&&(h.value=!1)),j(()=>t.permanent,N=>{N&&(h.value=!0)}),nt(()=>{t.modelValue!=null||z.value||(h.value=t.permanent||!v.value)});const{isDragging:x,dragProgress:y,dragStyles:_}=Sa({isActive:h,isTemporary:z,width:O,touchless:K(t,"touchless"),position:q}),B=C(()=>{const N=z.value?0:t.rail&&t.expandOnHover?Number(t.railWidth):O.value;return x.value?N*y.value:N}),{layoutItemStyles:L,layoutRect:M,layoutItemScrimStyles:ae}=ge({id:t.name,order:C(()=>parseInt(t.order,10)),position:q,layoutSize:B,elementSize:O,active:C(()=>h.value||x.value),disableTransitions:C(()=>x.value),absolute:C(()=>t.absolute||U.value&&typeof ne.value!="string")}),{isStuck:ne,stickyStyles:_e}=Aa({rootEl:$,isSticky:U,layoutItemStyles:L}),le=me(C(()=>typeof t.scrim=="string"?t.scrim:null)),je=C(()=>({...x.value?{opacity:y.value*.2,transition:"none"}:void 0,...M.value?{left:ie(M.value.left),right:ie(M.value.right),top:ie(M.value.top),bottom:ie(M.value.bottom)}:void 0,...ae.value}));return lt({VList:{bgColor:"transparent"}}),G(()=>{var N,be,ke,we;const Fe=s.image||t.image;return o(J,null,[o(t.tag,Y({ref:$,onMouseenter:()=>W.value=!0,onMouseleave:()=>W.value=!1,class:["v-navigation-drawer",`v-navigation-drawer--${q.value}`,{"v-navigation-drawer--expand-on-hover":t.expandOnHover,"v-navigation-drawer--floating":t.floating,"v-navigation-drawer--is-hovering":W.value,"v-navigation-drawer--rail":t.rail,"v-navigation-drawer--temporary":z.value,"v-navigation-drawer--active":h.value,"v-navigation-drawer--sticky":U.value},a.value,p.value,d.value,i.value,l.value],style:[g.value,L.value,_.value,V.value,_e.value]},m),{default:()=>[Fe&&o("div",{key:"image",class:"v-navigation-drawer__img"},[s.image?(N=s.image)==null?void 0:N.call(s,{image:t.image}):o("img",{src:t.image,alt:""},null)]),s.prepend&&o("div",{class:"v-navigation-drawer__prepend"},[(be=s.prepend)==null?void 0:be.call(s)]),o("div",{class:"v-navigation-drawer__content"},[(ke=s.default)==null?void 0:ke.call(s)]),s.append&&o("div",{class:"v-navigation-drawer__append"},[(we=s.append)==null?void 0:we.call(s)])]}),o(Ie,{name:"fade-transition"},{default:()=>[z.value&&(x.value||h.value)&&!!t.scrim&&o("div",{class:["v-navigation-drawer__scrim",le.backgroundColorClasses.value],style:[je.value,le.backgroundColorStyles.value],onClick:()=>h.value=!1},null)]})])}),{isStuck:ne}}}),Pa={class:"text-subtitle-1"},Ba=F({__name:"PlayerSelect",setup(t){const u=P(void 0),m=C(()=>{var v,l;const i=[];for(const c in(v=b)==null?void 0:v.players){const h=(l=b)==null?void 0:l.players[c];!d(h,!0)||i.push(h)}return i.slice().sort((c,h)=>{var V;return c.display_name.toUpperCase()>((V=h.display_name)==null?void 0:V.toUpperCase())?1:-1})});j(()=>w.showPlayersMenu,i=>{i||(u.value=void 0)}),j(()=>w.selectedPlayer,i=>{i&&localStorage.setItem("mass.LastPlayerId",i.player_id)}),j(()=>b.players,i=>{i&&p()});const s=P(),n=P();re(()=>{var i,v,l;s.value=(l=(v=(i=it())==null?void 0:i.vnode)==null?void 0:v.el)==null?void 0:l.getRootNode(),p()});const a=function(i){n.value!=i&&(n.value=i,setTimeout(()=>{var l;const v=(l=s.value)==null?void 0:l.getElementById(i);v==null||v.scrollIntoView({behavior:"smooth"})},0))},d=function(i,v=!0,l=!1,c=!1){return!(!i.enabled||!i.available&&!v||i.synced_to&&!l||i.hidden_by.length&&!c)},p=function(){if(w.selectedPlayer&&d(w.selectedPlayer,!1,!1,!1))return;const i=g();i&&(w.selectedPlayer=i,console.log("Selected new default player: ",i.display_name))},g=function(){var v,l,c,h;const i=localStorage.getItem("mass.LastPlayerId");if(i&&i in b.players&&d(b.players[i],!1,!1,!1))return b.players[i];if((v=b)!=null&&v.players){for(const V in(l=b)==null?void 0:l.players){const $=b.players[V];if($.state==Me.PLAYING)return $}for(const V in(c=b)==null?void 0:c.queues){const $=b.queues[V];if(!!d(b.players[V],!1,!1,!1)&&$.items)return b.players[V]}for(const V in(h=b)==null?void 0:h.queues)if(!!d(b.players[V],!1,!1,!1))return b.players[V]}};return(i,v)=>(f(),S(Ra,{modelValue:e(w).showPlayersMenu,"onUpdate:modelValue":v[2]||(v[2]=l=>e(w).showPlayersMenu=l),location:"right",app:"",clipped:"",temporary:"",width:"300",style:{"z-index":"9999"}},{default:r(()=>[o(St,{class:"headline"},{default:r(()=>[T("b",null,k(i.$t("players")),1)]),_:1}),o(I,{variant:"plain",style:{position:"absolute",right:"-10px",top:"0px"},icon:"mdi-close",dark:"",text:"",onClick:v[0]||(v[0]=l=>e(w).showPlayersMenu=!e(w).showPlayersMenu)}),o(X),o(At,{modelValue:u.value,"onUpdate:modelValue":v[1]||(v[1]=l=>u.value=l),focusable:"",accordion:"",flat:""},{default:r(()=>[(f(!0),A(J,null,oe(e(m),l=>(f(),S(Ct,{id:l.player_id,key:l.player_id,disabled:!l.available,flat:""},{default:r(()=>{var c;return[o(xt,{class:"playerrow",style:Z(((c=e(w).selectedPlayer)==null?void 0:c.player_id)==l.player_id?"padding:0;background-color:rgba(50, 115, 220, 0.2);":"padding:0"),"expand-icon":"mdi-chevron-down","collapse-icon":"mdi-chevron-up",onClick:h=>{e(w).selectedPlayer=l,a(l.player_id)}},{default:r(()=>[o(H,{density:"compact"},{prepend:r(()=>[o(E,{size:"50",icon:l.group_childs.length>0?"mdi-speaker-multiple":"mdi-speaker",color:"accent",style:{"padding-left":"0px","padding-right":"0px","margin-left":"-10px","margin-right":"10px",width:"42px",height:"50px"}},null,8,["icon"])]),title:r(()=>[T("div",Pa,[T("b",null,k(e(he)(l)),1)])]),subtitle:r(()=>[(f(),A("div",{key:l.state,class:"text-body-2",style:{"line-height":"1em"}},k(i.$t("state."+l.state)),1))]),_:2},1024)]),_:2},1032,["style","onClick"]),o(Vt,{variant:"contain"},{default:r(()=>[o(Ye,{player:l},null,8,["player"])]),_:2},1024)]}),_:2},1032,["id","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]))}});function Ia(t={}){const{immediate:u=!1,onNeedRefresh:m,onOfflineReady:s,onRegistered:n,onRegisteredSW:a,onRegisterError:d}=t;let p,g,i,v;const l=async(h=!0)=>{await i,h&&(p==null||p.addEventListener("controlling",V=>{V.isUpdate&&window.location.reload()})),await(v==null?void 0:v())};async function c(){if("serviceWorker"in navigator){const{Workbox:h,messageSW:V}=await ot(()=>import("./workbox-window.prod.es5.d2780aeb.js"),[],import.meta.url);v=async()=>{g&&g.waiting&&await V(g.waiting,{type:"SKIP_WAITING"})},p=new h("./sw.js",{scope:"./",type:"classic"}),p.addEventListener("activated",$=>{$.isUpdate||s==null||s()});{const $=()=>{m==null||m()};p.addEventListener("waiting",$),p.addEventListener("externalwaiting",$)}p.register({immediate:u}).then($=>{g=$,a?a("./sw.js",$):n==null||n($)}).catch($=>{d==null||d($)})}}return i=c(),l}function Ma(t={}){const{immediate:u=!0,onNeedRefresh:m,onOfflineReady:s,onRegistered:n,onRegisteredSW:a,onRegisterError:d}=t,p=P(!1),g=P(!1);return{updateServiceWorker:Ia({immediate:u,onNeedRefresh(){p.value=!0,m==null||m()},onOfflineReady(){g.value=!0,s==null||s()},onRegistered:n,onRegisteredSW:a,onRegisterError:d}),offlineReady:g,needRefresh:p}}const Ea={key:0,class:"pwa-toast",role:"alert"},za={class:"message"},La={key:0},Da={key:1},Na=F({__name:"ReloadPrompt",setup(t){const{offlineReady:u,needRefresh:m,updateServiceWorker:s}=Ma(),n=async()=>{u.value=!1,m.value=!1};return(a,d)=>e(u)||e(m)?(f(),A("div",Ea,[T("div",za,[e(u)?(f(),A("span",La," App ready to work offline ")):(f(),A("span",Da," New content available, click on reload button to update. "))]),e(m)?(f(),A("button",{key:0,onClick:d[0]||(d[0]=p=>e(s)())}," Reload ")):R("",!0),T("button",{onClick:n}," Close ")])):R("",!0)}});const Wa=te({name:"VApp",props:{...ht({fullHeight:!0}),...pe()},setup(t,u){let{slots:m}=u;const s=fe(t),{layoutClasses:n,layoutStyles:a,getLayoutItem:d,items:p,layoutRef:g}=_t(t),{rtlClasses:i}=ze();return G(()=>{var v;return o("div",{ref:g,class:["v-application",s.themeClasses.value,n.value,i.value],style:a.value},[o("div",{class:"v-application__wrap"},[(v=m.default)==null?void 0:v.call(m)])])}),{getLayoutItem:d,items:p,theme:s}}}),an=F({__name:"Default",setup(t){return(u,m)=>(f(),S(Wa,null,{default:r(()=>[o(Ba),o(Nt),e(b).state.value==e(st).CONNECTED?(f(),S(Ot,{key:0})):(f(),S(mt,{key:1},{default:r(()=>[o(Le,{indeterminate:"",size:"64"})]),_:1})),o(wa),e(w).isInStandaloneMode?(f(),S(Na,{key:2})):R("",!0)]),_:1}))}});export{an as default};
