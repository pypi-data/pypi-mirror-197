import{b as I,e as L,r as F,ab as R,q as r,a$ as x,J as z,E as A,o as n,l as p,a as s,w as a,p as d,F as M,n as U,h as v,j as o,m as f,i as h,v as g,b1 as j,b2 as q,k as _}from"./index.a30f9374.js";import{b as G}from"./ProviderIcons.vue_vue_type_style_index_0_scoped_c020fdb7_lang.49fb17b0.js";import{i as J,V as c,b as O}from"./VCardText.8356876e.js";import{b as C,a as S,V as Y}from"./VTooltip.96c48329.js";import{a as V,V as H}from"./VBtn.ef3d72f5.js";import"./VDivider.9475c70a.js";const K={class:"listitem-actions"},Q={key:0,class:"listitem-action"},W={key:1,class:"listitem-action"},X={key:2,class:"listitem-action"},Z={class:"listitem-action"},ne=I({__name:"Players",setup(ee){const E=L(),u=F([]),y=R({}),N=r.subscribe_multi([x.PLAYER_CONFIG_UPDATED],()=>{$()});z(N);const $=async function(){u.value=await r.getData("config/players");const e=await r.getData("providers/available");for(const l of e)y[l.domain]=l},D=function(e){r.sendCommand("config/players/remove",{player_id:e}),u.value=u.value.filter(l=>l.player_id!=e)},P=function(e){e in r.players&&E.push(`/settings/editplayer/${e}`)},T=function(e){const l={enabled:!e.enabled};r.sendCommand("config/players/update",{player_id:e.player_id,update:l})},b=function(e){var l;return e.name||((l=r.players[e.player_id])==null?void 0:l.name)||e.player_id};return A(()=>r.players,e=>{e&&$()},{immediate:!0}),(e,l)=>(n(),p("section",null,[s(J,null,{default:a(()=>[d("div",null,[(n(!0),p(M,null,U([...u.value].sort((t,m)=>b(t)>b(m)?1:-1),t=>{var m;return n(),v(c,{key:t.player_id,title:b(t),subtitle:((m=o(r).providers[t.provider])==null?void 0:m.name)||t.provider,onClick:k=>P(t.player_id)},{prepend:a(()=>[s(O,{scale:"",width:"36px",class:"listitem-thumb",src:o(G)(t.provider)},null,8,["src"])]),append:a(()=>{var k,w;return[d("div",K,[t.enabled?(k=o(r).providers[t.provider])!=null&&k.last_error?(n(),p("div",W,[s(C,{location:"top end",origin:"end center"},{activator:a(({props:i})=>[s(V,f(i,{color:"red"}),{default:a(()=>[h(" mdi-alert-circle ")]),_:2},1040)]),default:a(()=>{var i;return[d("span",null,g((i=o(r).providers[t.provider])==null?void 0:i.last_error),1)]}),_:2},1024)])):(w=o(r).players[t.player_id])!=null&&w.available?_("",!0):(n(),p("div",X,[s(C,{location:"top end",origin:"end center"},{activator:a(({props:i})=>[s(V,j(q(i)),{default:a(()=>[h(" mdi-timer-sand ")]),_:2},1040)]),default:a(()=>[d("span",null,g(e.$t("settings.player_not_available")),1)]),_:1})])):(n(),p("div",Q,[s(C,{location:"top end",origin:"end center"},{activator:a(({props:i})=>[s(V,f(i,{color:"grey"}),{default:a(()=>[h(" mdi-cancel ")]),_:2},1040)]),default:a(()=>[d("span",null,g(e.$t("settings.player_disabled")),1)]),_:1})])),d("div",Z,[s(S,{location:"bottom end"},{activator:a(({props:i})=>[s(H,f({color:"grey-darken-1",icon:"mdi-dots-vertical",variant:"text"},i,{size:"x-large",style:{"margin-right":"-70px"}}),null,16)]),default:a(()=>[s(Y,null,{default:a(()=>{var i;return[t.enabled&&t.player_id in o(r).players?(n(),v(c,{key:0,title:e.$t("settings.configure"),"prepend-icon":"mdi-cog",onClick:B=>P(t.player_id)},null,8,["title","onClick"])):_("",!0),s(c,{title:t.enabled?e.$t("settings.disable"):e.$t("settings.enable"),"prepend-icon":"mdi-cog",onClick:B=>T(t)},null,8,["title","onClick"]),y[t.provider].documentation?(n(),v(c,{key:1,title:e.$t("settings.documentation"),"prepend-icon":"mdi-bookshelf",href:y[t.provider].documentation,target:"_blank"},null,8,["title","href"])):_("",!0),(i=o(r).players[t.player_id])!=null&&i.available?_("",!0):(n(),v(c,{key:2,title:e.$t("settings.delete"),"prepend-icon":"mdi-delete",onClick:B=>D(t.player_id)},null,8,["title","onClick"]))]}),_:2},1024)]),_:2},1024)])])]}),_:2},1032,["title","subtitle","onClick"])}),128))])]),_:1})]))}});export{ne as default};
