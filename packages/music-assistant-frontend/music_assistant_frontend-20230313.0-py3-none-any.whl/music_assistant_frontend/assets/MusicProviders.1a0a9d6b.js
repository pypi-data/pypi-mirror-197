/* empty css                             */import{b as j,e as A,r as F,ab as O,c as q,q as s,a$ as J,J as G,E as H,o,l as c,a,w as i,j as l,b0 as T,h as v,p as m,v as u,i as g,k as b,F as B,n as D,m as y,b1 as K,b2 as Q}from"./index.a30f9374.js";import{b as E}from"./ProviderIcons.vue_vue_type_style_index_0_scoped_c020fdb7_lang.49fb17b0.js";import{V as W}from"./VAlert.d5d9f276.js";import{a as M,V as x,b as k}from"./VTooltip.96c48329.js";import{V as S,a as f}from"./VBtn.ef3d72f5.js";import{i as X,V as p,b as z}from"./VCardText.8356876e.js";import"./VDivider.9475c70a.js";const Y=m("br",null,null,-1),Z={class:"listitem-actions"},ee={key:0,class:"listitem-action",style:{"margin-right":"15px"}},te={key:1,class:"listitem-action",style:{"margin-right":"15px"}},ie={key:2,class:"listitem-action",style:{"margin-right":"15px"}},ne={key:3,class:"listitem-action",style:{"margin-right":"15px"}},ae={key:0},oe={key:1},se={class:"listitem-action"},be=j({__name:"MusicProviders",setup(re){const C=A(),_=F([]),r=O({}),I=q(()=>Object.values(r).filter(t=>!t.builtin&&(t.multi_instance||!_.value.find(d=>d.domain)))),N=s.subscribe(J.PROVIDERS_UPDATED,()=>{$()});G(N);const $=async function(){_.value=await s.getData("config/providers");const t=await s.getData("providers/available");for(const d of t)r[d.domain]=d},R=function(t){s.sendCommand("config/providers/remove",{instance_id:t}),_.value=_.value.filter(d=>d.instance_id!=t)},V=function(t){console.log("editProvider",t),C.push(`/settings/editprovider/${t}`)},U=function(t){console.log("addProvider",t),C.push(`/settings/addprovider/${t.domain}`)},L=function(t){const d={enabled:!t.enabled};s.sendCommand("config/providers/update",{instance_id:t.instance_id,update:d})};return H(()=>s.providers,t=>{t&&$()},{immediate:!0}),(t,d)=>(o(),c("section",null,[a(X,null,{default:i(()=>[_.value.filter(e=>e.type==l(T).MUSIC&&e.domain in r&&e.domain!="url").length==0?(o(),v(W,{key:0,color:"primary",theme:"dark",icon:"mdi-radio-tower",prominent:""},{default:i(()=>[m("b",null,u(t.$t("settings.no_providers")),1),Y,g(" "+u(t.$t("settings.no_providers_detail")),1)]),_:1})):b("",!0),m("div",null,[(o(!0),c(B,null,D(_.value.filter(e=>e.type==l(T).MUSIC&&e.domain in r),e=>(o(),v(p,{key:e.instance_id,title:e.name||r[e.domain].name,subtitle:r[e.domain].description,onClick:h=>V(e.instance_id)},{prepend:i(()=>[a(z,{contain:"",width:"36px",class:"listitem-thumb",src:l(E)(e.domain)},null,8,["src"])]),append:i(()=>{var h,P;return[m("div",Z,[l(s).syncTasks.value.filter(n=>n.provider_instance==e.instance_id).length>0?(o(),c("div",ee,[a(k,{location:"top end",origin:"end center"},{activator:i(({props:n})=>[a(f,y(n,{color:"grey"}),{default:i(()=>[g(" mdi-sync ")]),_:2},1040)]),default:i(()=>[m("span",null,u(t.$t("settings.sync_running")),1)]),_:1})])):b("",!0),e.enabled?(h=l(s).providers[e.instance_id])!=null&&h.last_error?(o(),c("div",ie,[a(k,{location:"top end",origin:"end center"},{activator:i(({props:n})=>[a(f,y(n,{color:"red"}),{default:i(()=>[g(" mdi-alert-circle ")]),_:2},1040)]),default:i(()=>{var n;return[m("span",null,u((n=l(s).providers[e.instance_id])==null?void 0:n.last_error),1)]}),_:2},1024)])):(P=l(s).providers[e.instance_id])!=null&&P.available?b("",!0):(o(),c("div",ne,[a(k,{location:"top end",origin:"end center"},{activator:i(({props:n})=>[a(f,K(Q(n)),{default:i(()=>[g(" mdi-timer-sand ")]),_:2},1040)]),default:i(()=>{var n,w;return[(n=l(s).providers[e.instance_id])!=null&&n.last_error?(o(),c("span",ae,u((w=l(s).providers[e.instance_id])==null?void 0:w.last_error),1)):(o(),c("span",oe,u(t.$t("settings.not_loaded")),1))]}),_:2},1024)])):(o(),c("div",te,[a(k,{location:"top end",origin:"end center"},{activator:i(({props:n})=>[a(f,y(n,{color:"grey"}),{default:i(()=>[g(" mdi-cancel ")]),_:2},1040)]),default:i(()=>[m("span",null,u(t.$t("settings.provider_disabled")),1)]),_:1})])),m("div",se,[a(M,{location:"bottom end"},{activator:i(({props:n})=>[a(S,y({color:"grey-darken-1",icon:"mdi-dots-vertical",variant:"text"},n,{size:"x-large",style:{"margin-right":"-70px"}}),null,16)]),default:i(()=>[a(x,null,{default:i(()=>[a(p,{title:t.$t("settings.configure"),"prepend-icon":"mdi-cog",disabled:r[e.domain].config_entries.length==0,onClick:n=>V(e.instance_id)},null,8,["title","disabled","onClick"]),a(p,{title:e.enabled?t.$t("settings.disable"):t.$t("settings.enable"),"prepend-icon":"mdi-cog",onClick:n=>L(e)},null,8,["title","onClick"]),r[e.domain].documentation?(o(),v(p,{key:0,title:t.$t("settings.documentation"),"prepend-icon":"mdi-bookshelf",href:r[e.domain].documentation,target:"_blank"},null,8,["title","href"])):b("",!0),r[e.domain].documentation?(o(),v(p,{key:1,title:t.$t("settings.sync"),"prepend-icon":"mdi-sync",onClick:n=>l(s).startSync(void 0,[e.instance_id])},null,8,["title","onClick"])):b("",!0),!r[e.domain].builtin&&!r[e.domain].load_by_default?(o(),v(p,{key:2,title:t.$t("settings.delete"),"prepend-icon":"mdi-delete",onClick:n=>R(e.instance_id)},null,8,["title","onClick"])):b("",!0)]),_:2},1024)]),_:2},1024)])])]}),_:2},1032,["title","subtitle","onClick"]))),128))]),a(M,{location:"bottom end","min-width":"500"},{activator:i(({props:e})=>[a(S,y({color:"primary",icon:"mdi-plus",size:"x-large",position:"fixed",location:"bottom right",elevation:"8",style:{"margin-bottom":"180px","margin-right":"15px","z-index":"9999"}},e),null,16)]),default:i(()=>[a(x,null,{default:i(()=>[(o(!0),c(B,null,D(l(I),e=>(o(),v(p,{key:e.domain,title:e.name,onClick:h=>U(e)},{prepend:i(()=>[a(z,{contain:"",width:"26px",style:{"margin-right":"20px"},src:l(E)(e.domain)},null,8,["src"])]),_:2},1032,["title","onClick"]))),128))]),_:1})]),_:1})]),_:1})]))}});export{be as default};
