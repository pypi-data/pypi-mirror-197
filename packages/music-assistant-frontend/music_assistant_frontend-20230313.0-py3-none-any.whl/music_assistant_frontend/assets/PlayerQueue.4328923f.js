import{b as Q,f as ee,e as te,r as x,c as I,x as ie,q as s,a$ as D,J as le,s as M,E as ae,o as d,l as f,a as t,w as o,i as C,v as u,j as n,p,h as k,k as c,aT as V,M as K,m as P}from"./index.a30f9374.js";import{s as oe}from"./vue-virtual-scroller.esm.03d19617.js";/* empty css                             */import{_ as ne,f as ue,t as se}from"./MediaItemThumb.vue_vue_type_style_index_0_lang.aaf7ce1a.js";import{V as F,a as de}from"./VTabs.6793a364.js";import{V as G}from"./VAlert.d5d9f276.js";import{V as g,a as $,i as re}from"./VCardText.8356876e.js";import{b as H,a as me,V as pe,c as _e}from"./VTooltip.96c48329.js";import{V as A,a as y}from"./VBtn.ef3d72f5.js";import{V as b}from"./VDivider.9475c70a.js";import{V as ve}from"./VCard.10f880bf.js";import{V as fe,a as W}from"./VToolbar.d3934ab2.js";import"./VCardTitle.a21137d9.js";const ce={style:{"padding-left":"15px","padding-right":"-15px","padding-top":"10px","padding-bottom":"20px"}},ge=p("br",null,null,-1),ye={key:0},be={class:"listitem-thumb"},qe={key:0},Ce={key:1},ke={key:2},Ve={class:"listitem-actions"},$e={key:0,class:"listitem-action"},we={key:1,class:"listitem-action"},he={key:2,class:"listitem-action"},Le=Q({__name:"PlayerQueue",setup(Te){const{t:X}=ee(),B=te(),U=x(0),r=x(),q=x(!1),w=x([]);x(0);const e=I(()=>{if(M.selectedPlayer)return s.queues[M.selectedPlayer.active_queue]}),Y=I(()=>{if(e.value)return e.value.current_item}),N=I(()=>e.value?w.value.slice(e.value.current_index):[]),S=I(()=>e.value?w.value.slice(0,e.value.current_index):[]),Z=I(()=>U.value==1?S.value:N.value);ie(()=>{const a=s.subscribe_multi([D.QUEUE_UPDATED,D.QUEUE_ITEMS_UPDATED],i=>{var T;i.object_id==((T=e.value)==null?void 0:T.queue_id)&&(i.event==D.QUEUE_ITEMS_UPDATED?z():L())});le(a)});const z=async function(){e.value?(M.topBarTitle=e.value.display_name,w.value=await s.getPlayerQueueItems(e.value.queue_id)):(M.topBarTitle=void 0,w.value=[])},R=function(a){r.value=a,q.value=!0},j=function(a){E(),B.push({name:a.media_type,params:{itemId:a.item_id,provider:a.provider}})},h=function(a,i){E(),!(!a||!e.value)&&(i=="play_now"?s.queueCommandPlayIndex(e==null?void 0:e.value.queue_id,a.queue_item_id):i=="move_next"?s.queueCommandMoveNext(e==null?void 0:e.value.queue_id,a.queue_item_id):i=="up"?s.queueCommandMoveUp(e==null?void 0:e.value.queue_id,a.queue_item_id):i=="down"?s.queueCommandMoveDown(e==null?void 0:e.value.queue_id,a.queue_item_id):i=="delete"&&s.queueCommandDelete(e==null?void 0:e.value.queue_id,a.queue_item_id))},L=function(){M.topBarContextMenuItems=[{label:"settings.player_settings",labelArgs:[],action:()=>{B.push(`/settings/editplayer/${e.value.queue_id}`)},icon:"mdi-cog-outline"},{label:"queue_clear",labelArgs:[],action:()=>{s.queueCommandClear(e.value.queue_id)},icon:"mdi-cancel"},{label:e.value.shuffle_enabled?"shuffle_enabled":"shuffle_disabled",labelArgs:[],action:()=>{s.queueCommandShuffleToggle(e.value.queue_id)},icon:e.value.shuffle_enabled?"mdi-shuffle":"mdi-shuffle-disabled"},{label:"repeat_mode",labelArgs:[X(`repeatmode.${e.value.repeat_mode}`)],action:()=>{s.queueCommandRepeatToggle(e.value.queue_id)},icon:e.value.shuffle_enabled?"mdi-repeat":"mdi-repeat-off"},{label:e.value.crossfade_enabled?"crossfade_enabled":"crossfade_disabled",labelArgs:[],action:()=>{s.queueCommandCrossfadeToggle(e.value.queue_id)},icon:e.value.crossfade_enabled?"mdi-swap-horizontal-bold":"mdi-swap-horizontal"}]},E=function(){r.value=void 0,q.value=!1};return ae(()=>e.value,a=>{a&&(z(),L())},{immediate:!0}),(a,i)=>{var T;return d(),f("section",null,[t(de,{modelValue:U.value,"onUpdate:modelValue":i[0]||(i[0]=l=>U.value=l),"show-arrows":"",grow:""},{default:o(()=>[t(F,{value:0},{default:o(()=>[C(u(a.$t("queue_next_items")+" ("+n(N).length+")"),1)]),_:1}),t(F,{value:1},{default:o(()=>[C(u(a.$t("queue_previous_items")+" ("+n(S).length+")"),1)]),_:1})]),_:1},8,["modelValue"]),p("div",ce,[n(e)&&((T=n(e))==null?void 0:T.radio_source.length)>0?(d(),k(G,{key:0,color:"primary",theme:"dark",icon:"mdi-radio-tower",prominent:"",style:{"margin-right":"10px"}},{default:o(()=>{var l,v,m,_;return[p("b",null,u(a.$t("queue_radio_enabled")),1),ge,C(" "+u(a.$t("queue_radio_based_on",[a.$t((l=n(e))==null?void 0:l.radio_source[0].media_type)]))+" ",1),p("b",null,[p("a",{onClick:i[1]||(i[1]=O=>{var J;return n(e)?j((J=n(e))==null?void 0:J.radio_source[0]):""})},u((v=n(e))==null?void 0:v.radio_source[0].name),1)]),((m=n(e))==null?void 0:m.radio_source.length)>1?(d(),f("span",ye," (+"+u(((_=n(e))==null?void 0:_.radio_source.length)-1)+")",1)):c("",!0)]}),_:1})):c("",!0),t(n(oe),{items:n(Z),"item-size":66,"key-field":"queue_item_id","page-mode":""},{default:o(({item:l})=>{var v;return[p("div",null,[t(g,{ripple:"",disabled:l.queue_item_id==((v=n(Y))==null?void 0:v.queue_item_id),onClick:V(m=>R(l),["stop"]),onContextmenu:V(m=>R(l),["right","prevent"])},{prepend:o(()=>[p("div",be,[t(ne,{item:l,size:50,width:"50px",height:"50px"},null,8,["item"])])]),title:o(()=>[C(u(l.media_item?l.media_item.name:l.name),1)]),subtitle:o(()=>[l.media_item&&"artists"in l.media_item&&l.media_item.artists.length>0?(d(),f("div",qe,u(l.media_item.artists[0].name),1)):l.media_item?(d(),f("div",Ce,u(l.media_item.metadata.description),1)):(d(),f("div",ke,u(l.uri),1))]),append:o(()=>{var m;return[p("div",Ve,[l.duration&&((m=l.media_item)==null?void 0:m.media_type)!=n(K).RADIO?(d(),f("div",$e,[p("span",null,u(n(ue)(l.duration)),1)])):c("",!0),a.$vuetify.display.mobile?c("",!0):(d(),f("div",we,[t(H,{location:"bottom"},{activator:o(({props:_})=>[t(A,P({variant:"plain",ripple:""},_,{icon:"mdi-arrow-up",onClick:[O=>n(s).queueCommandMoveUp(n(e).queue_id,l.queue_item_id),i[2]||(i[2]=V(()=>{},["prevent"])),i[3]||(i[3]=V(()=>{},["stop"]))]}),null,16,["onClick"])]),default:o(()=>[p("span",null,u(a.$t("queue_move_up")),1)]),_:2},1024)])),a.$vuetify.display.mobile?c("",!0):(d(),f("div",he,[t(H,{location:"bottom"},{activator:o(({props:_})=>[t(A,P({variant:"plain",ripple:""},_,{icon:"mdi-arrow-down",onClick:[O=>n(s).queueCommandMoveDown(n(e).queue_id,l.queue_item_id),i[4]||(i[4]=V(()=>{},["prevent"])),i[5]||(i[5]=V(()=>{},["stop"]))]}),null,16,["onClick"])]),default:o(()=>[p("span",null,u(a.$t("queue_move_down")),1)]),_:2},1024)]))])]}),_:2},1032,["disabled","onClick","onContextmenu"]),t(b)])]}),_:1},8,["items"]),w.value.length==0?(d(),k(G,{key:1,type:"info",style:{margin:"20px"}},{default:o(()=>[C(u(a.$t("no_content")),1)]),_:1})):c("",!0)]),t(_e,{modelValue:q.value,"onUpdate:modelValue":i[14]||(i[14]=l=>q.value=l),class:"align-center justify-center",scrim:!1},{default:o(()=>[t(me,{modelValue:q.value,"onUpdate:modelValue":i[13]||(i[13]=l=>q.value=l),class:"fullscreen-menu"},{default:o(()=>[t(ve,null,{default:o(()=>[t(fe,{sense:"",dark:"",color:"primary"},{default:o(()=>[t(y,{icon:"mdi-play-circle-outline"}),r.value?(d(),k(W,{key:0,style:{"padding-left":"10px"}},{default:o(()=>{var l;return[p("b",null,u(n(se)(((l=r.value)==null?void 0:l.name)||"",a.$vuetify.display.mobile?20:150)),1)]}),_:1})):(d(),k(W,{key:1,style:{"padding-left":"10px"}},{default:o(()=>{var l;return[p("b",null,u(a.$t("settings")),1),C(" | "+u((l=n(e))==null?void 0:l.display_name),1)]}),_:1})),t(A,{icon:"mdi-close",dark:"",text:"",onClick:i[6]||(i[6]=l=>E())})]),_:1}),r.value?(d(),k(re,{key:0},{default:o(()=>[t(pe,null,{default:o(()=>{var l,v;return[t(g,{title:a.$t("play_now"),onClick:i[7]||(i[7]=m=>h(r.value,"play_now"))},{prepend:o(()=>[t($,{style:{"padding-right":"10px"}},{default:o(()=>[t(y,{icon:"mdi-play-circle-outline"})]),_:1})]),_:1},8,["title"]),t(b),t(g,{title:a.$t("play_next"),onClick:i[8]||(i[8]=m=>h(r.value,"move_next"))},{prepend:o(()=>[t($,{style:{"padding-right":"10px"}},{default:o(()=>[t(y,{icon:"mdi-skip-next-circle-outline"})]),_:1})]),_:1},8,["title"]),t(b),t(g,{title:a.$t("queue_move_up"),onClick:i[9]||(i[9]=m=>h(r.value,"up"))},{prepend:o(()=>[t($,{style:{"padding-right":"10px"}},{default:o(()=>[t(y,{icon:"mdi-arrow-up"})]),_:1})]),_:1},8,["title"]),t(b),t(g,{title:a.$t("queue_move_down"),onClick:i[10]||(i[10]=m=>h(r.value,"down"))},{prepend:o(()=>[t($,{style:{"padding-right":"10px"}},{default:o(()=>[t(y,{icon:"mdi-arrow-down"})]),_:1})]),_:1},8,["title"]),t(b),t(g,{title:a.$t("queue_delete"),onClick:i[11]||(i[11]=m=>h(r.value,"delete"))},{prepend:o(()=>[t($,{style:{"padding-right":"10px"}},{default:o(()=>[t(y,{icon:"mdi-delete"})]),_:1})]),_:1},8,["title"]),t(b),((v=(l=r.value)==null?void 0:l.media_item)==null?void 0:v.media_type)==n(K).TRACK?(d(),k(g,{key:0,title:a.$t("show_info"),onClick:i[12]||(i[12]=m=>{var _;return(_=r.value)!=null&&_.media_item?j(r.value.media_item):""})},{prepend:o(()=>[t($,{style:{"padding-right":"10px"}},{default:o(()=>[t(y,{icon:"mdi-information-outline"})]),_:1})]),_:1},8,["title"])):c("",!0),t(b)]}),_:1})]),_:1})):c("",!0)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])])}}});export{Le as default};
