import{d as j,ai as E,c as F,aS as K,a as l,m as k,b as O,f as H,ab as q,o as s,l as m,w as r,aT as y,j as e,M as c,p as d,v as n,i as b,k as u,h as g,B as L,q as C,aI as B}from"./index.2367b5b2.js";import{_ as Q,a as W,b as G,g as J,c as X}from"./ProviderIcons.vue_vue_type_style_index_0_scoped_c020fdb7_lang.6fba6fba.js";import{_ as Y}from"./_plugin-vue_export-helper.cdc0426e.js";import{_ as Z,c as _,p as tt,a as x,f as et,t as P}from"./MediaItemThumb.vue_vue_type_style_index_0_lang.96a4e687.js";import{a as it,u as at,f as nt,b as st}from"./VLabel.4a02961f.js";import{m as ot,f as lt,V as mt}from"./VCheckboxBtn.66046ca0.js";import{u as rt,V as T,a as v}from"./VBtn.24e07398.js";import{b as I,V as dt,a as ut}from"./VTooltip.b2fc6bf2.js";import{b as ct,V as yt}from"./VCardText.468b25d6.js";import{V as vt}from"./VCard.9b1f3d5d.js";import{V as R}from"./VDivider.58333c98.js";const ft=Y(Q,[["__scopeId","data-v-c020fdb7"]]);const ht=j({name:"VCheckbox",inheritAttrs:!1,props:{...it(),...ot()},emits:{"update:focused":t=>!0},setup(t,f){let{attrs:w,slots:V}=f;const{isFocused:p,focus:$,blur:A}=at(t),D=E(),a=F(()=>t.id||`checkbox-${D}`);return rt(()=>{const[i,o]=K(w),[h,Ht]=nt(t),[z,qt]=lt(t);return l(st,k({class:"v-checkbox"},i,h,{id:a.value,focused:p.value}),{...V,default:M=>{let{id:N,isDisabled:S,isReadonly:U}=M;return l(mt,k(z,{id:N.value,disabled:S.value,readonly:U.value},o,{onFocus:$,onBlur:A}),V)}})}),{}}}),bt={key:0,class:"listitem-thumb"},gt={key:1,class:"listitem-thumb"},kt={key:2,class:"listitem-thumb"},pt={key:0},xt={key:1},wt={key:0},Vt={key:0},$t={key:1},Ct={key:2},Bt={key:3},It={key:4},At={key:5},Dt={key:6},Pt={class:"listitem-actions"},Tt={key:2,class:"listitem-action"},Lt={key:3,class:"listitem-action"},Rt={class:"text-h5",style:{padding:"10px"}},Ft={style:{height:"50px",display:"flex","align-items":"center"}},zt=["src"],Mt={style:{height:"50px",display:"flex","align-items":"center"}},Nt={key:0,style:{height:"50px",display:"flex","align-items":"center"}},St=["href"],Ut={style:{height:"50px",display:"flex","align-items":"center"}},jt=["src"],Et={key:1},Kt={style:{height:"50px",display:"flex","align-items":"center"}},Ot=["src"],ae=O({__name:"ListviewItem",props:{item:null,showTrackNumber:{type:Boolean,default:!0},showProviders:{type:Boolean,default:!0},showMenu:{type:Boolean,default:!0},showLibrary:{type:Boolean,default:!0},showDuration:{type:Boolean,default:!0},isSelected:{type:Boolean},showCheckboxes:{type:Boolean,default:!1},showDetails:{type:Boolean},parentItem:{default:void 0}},emits:["menu","click","select"],setup(t,{emit:f}){const w=t,{t:V}=H(),p=q({}),$=F(()=>{for(const a of w.item.provider_mappings)if(a.content_type!=null&&a.content_type in[B.DSF,B.FLAC,B.AIFF,B.WAV]&&(a.sample_rate>48e3||a.bit_depth>16))return`${a.sample_rate}kHz ${a.bit_depth} bits`;return""}),A=function(a){var i;if(a.media_type==c.FOLDER||!w.item.provider_mappings)return!0;for(const o of a.provider_mappings)if(o.available&&((i=C.providers[o.provider_instance])==null?void 0:i.available))return!0;return!1},D=async function(a,i){const o=`${a}.${i}`;if(o in p)return;const h=await C.getTrackPreviewUrl(a,i);p[o]=h};return(a,i)=>(s(),m("div",null,[l(yt,{ripple:"",style:{height:"60px"},disabled:!A(t.item),lines:"two",density:"compact",onClick:i[8]||(i[8]=y(o=>f("click",t.item),["stop"])),onContextmenu:i[9]||(i[9]=y(o=>f("menu",t.item),["right","prevent"]))},{prepend:r(()=>[t.showCheckboxes?(s(),m("div",bt,[l(ht,{"model-value":t.isSelected,onClick:i[0]||(i[0]=y(()=>{},["stop"])),"onUpdate:modelValue":i[1]||(i[1]=o=>{f("select",t.item,o)})},null,8,["model-value"])])):t.item.media_type==e(c).FOLDER?(s(),m("div",gt,[l(T,{variant:"plain",icon:""},{default:r(()=>[l(v,{icon:"mdi-folder",size:"60",style:{align:"center"}})]),_:1})])):(s(),m("div",kt,[l(Z,{item:t.item,size:50},null,8,["item"])]))]),title:r(()=>[t.item.media_type==e(c).FOLDER?(s(),m("span",pt,[d("span",null,n(e(_)(t.item,e(V))),1)])):(s(),m("span",xt,[b(n(t.item.name)+" ",1),"version"in t.item&&t.item.version?(s(),m("span",wt,"("+n(t.item.version)+")",1)):u("",!0)])),l(e(I),{location:"bottom"},{activator:r(({props:o})=>[e(tt)(t.item.metadata.explicit||!1)?(s(),g(v,k({key:0},o,{class:"listitem-action",icon:"mdi-alpha-e-box",width:"35"}),null,16)):u("",!0)]),default:r(()=>[d("span",null,n(a.$t("tooltip.explicit")),1)]),_:1})]),subtitle:r(()=>[t.item.media_type==e(c).TRACK&&"album"in t.item&&t.item.album&&!t.showTrackNumber?(s(),m("div",Vt,n(e(x)(t.item.artists))+" \u2022 "+n(t.item.album.name),1)):t.item.media_type==e(c).TRACK&&"track_number"in t.item&&t.item.track_number&&t.showTrackNumber?(s(),m("div",$t,n(e(x)(t.item.artists))+" \u2022 disc "+n(t.item.disc_number)+" track "+n(t.item.track_number),1)):t.item.media_type==e(c).ALBUM&&"artists"in t.item&&t.item.artists&&"year"in t.item&&t.item.year&&"album_type"in t.item?(s(),m("div",Ct,n(a.$t("album_type."+t.item.album_type))+" \u2022 "+n(e(x)(t.item.artists))+" \u2022 "+n(t.item.year),1)):t.item.media_type==e(c).ALBUM&&"artists"in t.item&&t.item.artists&&"album_type"in t.item?(s(),m("div",Bt,n(a.$t("album_type."+t.item.album_type))+" \u2022 "+n(e(x)(t.item.artists)),1)):"artists"in t.item&&t.item.artists?(s(),m("div",It,n(e(x)(t.item.artists)),1)):"owner"in t.item&&t.item.owner?(s(),m("div",At,n(t.item.owner),1)):u("",!0),t.item.media_type==e(c).RADIO&&t.item.metadata.description?(s(),m("div",Dt,n(t.item.metadata.description),1)):u("",!0)]),append:r(()=>[d("div",Pt,[e($)?(s(),g(ct,{key:0,class:"listitem-action",src:e(W),width:"35",style:L(a.$vuetify.theme.current.dark?"margin-top:5px;":"margin-top:5px;filter: invert(100%);")},{default:r(()=>[l(e(I),{activator:"parent",location:"bottom"},{default:r(()=>[b(n(e($)),1)]),_:1})]),_:1},8,["src","style"])):u("",!0),t.item.provider_mappings&&t.showProviders&&!a.$vuetify.display.mobile?(s(),g(ft,{key:1,"provider-mappings":t.item.provider_mappings,height:20,class:"listitem-actions"},null,8,["provider-mappings"])):u("",!0),"in_library"in t.item&&t.showLibrary&&!a.$vuetify.display.mobile?(s(),m("div",Tt,[l(e(I),{location:"bottom"},{activator:r(({props:o})=>[l(T,k({variant:"plain",ripple:""},o,{icon:t.item.in_library?"mdi-heart":"mdi-heart-outline",onClick:[i[2]||(i[2]=h=>e(C).toggleLibrary(t.item)),i[3]||(i[3]=y(()=>{},["prevent"])),i[4]||(i[4]=y(()=>{},["stop"]))]}),null,16,["icon"])]),default:r(()=>[d("span",null,n(a.$t("tooltip.library")),1)]),_:1})])):u("",!0),l(e(I),{location:"bottom"},{activator:r(({props:o})=>[t.parentItem&&t.parentItem.provider_mappings.find(h=>h.item_id===t.item.item_id)?(s(),g(v,k({key:0},o,{class:"listitem-action",icon:"mdi-link-variant",size:"30"}),null,16)):u("",!0)]),default:r(()=>[d("span",null,n(a.$t("tooltip.linked")),1)]),_:1}),t.showDuration&&t.item.media_type==e(c).TRACK&&"duration"in t.item&&t.item.duration!=null&&!a.$vuetify.display.mobile?(s(),m("div",Lt,[d("span",null,n(e(et)(t.item.duration)),1)])):u("",!0)]),t.showDetails?(s(),g(ut,{key:0,location:"bottom end","onClick:outside":i[6]||(i[6]=y(()=>{},["stop"]))},{activator:r(({props:o})=>[l(v,k({icon:"mdi-information-outline",size:"30",class:"listitem-action",style:{"margin-left":"10px","margin-right":"5px"}},o),null,16)]),default:r(()=>[l(vt,{class:"mx-auto","min-width":"300"},{default:r(()=>[l(dt,{style:{overflow:"hidden"}},{default:r(()=>[d("span",Rt,n(a.$t("provider_details")),1),l(R),d("div",Ft,[d("img",{height:"30",width:"50",center:"",src:e(G)(t.item.provider),style:{"object-fit":"contain"}},null,8,zt),b(" "+n(e(P)(e(C).providers[t.item.provider_mappings[0].provider_domain].name,25)),1)]),d("div",Mt,[l(v,{size:"40",icon:"mdi-identifier",style:{"margin-left":"10px","padding-right":"10px"}}),b(" "+n(e(P)(t.item.item_id,30)),1)]),t.item.provider_mappings[0].url&&!t.item.provider.includes("file")?(s(),m("div",Nt,[l(v,{size:"40",icon:"mdi-share-outline",style:{"margin-left":"10px","padding-right":"5px"}}),d("a",{href:t.item.provider_mappings[0].url,target:"_blank"},n(e(P)(t.item.provider_mappings[0].url,25)),9,St)])):u("",!0),d("div",Ut,[d("img",{height:"30",width:"50",src:e(J)(t.item.provider_mappings[0].content_type),style:L(a.$vuetify.theme.current.dark?"object-fit: contain;":"object-fit: contain;filter: invert(100%);")},null,12,jt),b(" "+n(e(X)(t.item.provider_mappings[0])),1)]),t.item.media_type==e(c).TRACK?(s(),m("div",Et,[d("div",Kt,[l(v,{icon:"mdi-headphones",size:"40",style:{"margin-left":"10px","padding-right":"15px"}}),b(" Preview ")]),d("div",{style:{height:"50px",display:"flex","align-items":"center","margin-left":"10px","margin-right":"10px"},onMouseover:i[5]||(i[5]=o=>D(t.item.provider,t.item.item_id))},[d("audio",{controls:"",src:p[`${t.item.provider}.${t.item.item_id}`]},null,8,Ot)],32)])):u("",!0)]),_:1})]),_:1})]),_:1})):u("",!0),t.showMenu?(s(),g(T,{key:1,icon:"mdi-dots-vertical",variant:"plain",style:{position:"absolute",right:"-3px",width:"10px"},onClick:i[7]||(i[7]=y(o=>f("menu",t.item),["stop"]))})):u("",!0)]),_:1},8,["disabled"]),l(R)]))}});export{ft as P,ht as V,ae as _};
