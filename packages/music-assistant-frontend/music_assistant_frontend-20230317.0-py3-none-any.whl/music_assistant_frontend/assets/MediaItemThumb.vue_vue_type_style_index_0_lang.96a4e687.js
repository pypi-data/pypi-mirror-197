import{P as m,b as d,r as v,aC as S,c as z,E as x,o as l,l as $,a as s,w as h,h as k,p as y,I as f,q as T}from"./index.2367b5b2.js";import{b as M}from"./VBtn.24e07398.js";import{b as B,a as U}from"./VCardText.468b25d6.js";const j=i=>i==null||!i?!1:typeof i=="boolean"?i:!!JSON.parse(String(i).toLowerCase()),q=function(i){i=Math.floor(i);const t=Math.floor(i/3600),n=Math.floor((i-t*3600)/60),a=i-t*3600-n*60;let e=t.toString(),r=n.toString(),u=a.toString();return t<10&&(e="0"+t),n<10&&(r="0"+n),a<10&&(u="0"+a),e==="00"?r+":"+u:e+":"+r+":"+u},g=function(i,t){return i?i.length<=t?i:i.slice(0,t)+"...":""},A=function(i){return i?i.map(t=>t.name).join(" / "):""},D=function(i,t){let n="";return(i==null?void 0:i.name)&&(i==null?void 0:i.label)?n=`${i.name}: ${t(i==null?void 0:i.label)}`:i!=null&&i.name?n=i.name:i!=null&&i.label?n=t(i==null?void 0:i.label):n=i.path||"",n},E=function(i,t=26){return i?i.type!=m.GROUP&&i.group_childs.length>0?`${g(i.display_name,t-3)} +${i.group_childs.length}`:g(i.display_name,t):""},C=["max-height","max-width","min-height","min-width"],p={class:"d-flex align-center justify-center fill-height"},N=function(i,t=f.THUMB,n=!1){if(!!i){if("image"in i&&i.image)return i.image;if("metadata"in i&&i.metadata.images){for(const a of i.metadata.images)if(!(a.is_file&&!n)&&a.type==t)return a}if("album"in i&&i.album&&"metadata"in i.album&&i.album.metadata&&i.album.metadata.images){for(const a of i.album.metadata.images)if(!(a.is_file&&!n)&&a.type==t)return a}if("artist"in i&&"metadata"in i.artist&&i.artist.metadata&&i.artist.metadata.images){for(const a of i.artist.metadata.images)if(!(a.is_file&&!n)&&a.type==t)return a}if("artists"in i&&i.artists){for(const a of i.artists)if("metadata"in a&&a.metadata.images){for(const e of a.metadata.images)if(!(e.is_file&&!n)&&e.type==t)return e}}}},P=async function(i,t=f.THUMB,n){var u;if(!i)return;const a=N(i,t,!0);if(!a)return;if(!a.is_file&&!n)return a.url;if(!a.is_file&&n)return`https://images.weserv.nl/?url=${a.url}&w=${n}&h=${n}&fit=cover&a=attention`;if(a.url.startsWith("https://"))return a.url;const e=encodeURIComponent(encodeURIComponent(a.url)),r="metadata"in i?(u=i.metadata)==null?void 0:u.checksum:"";return`${T.baseUrl}/imageproxy?size=${n||0}&path=${e}&checksum=${r}`},O=d({__name:"MediaItemThumb",props:{item:{default:void 0},size:{default:void 0},minSize:{default:void 0},maxSize:{default:256},tile:{type:Boolean,default:!0},cover:{type:Boolean,default:!0},fallback:{default:void 0}},setup(i){const t=i,n=v(),a=S(),e=z(()=>t.fallback?t.fallback:t.item?a.current.value.dark?`https://ui-avatars.com/api/?name=${t.item.name}&size=${t.maxSize}&bold=true&background=1d1d1d&color=383838`:`https://ui-avatars.com/api/?name=${t.item.name}&size=${t.maxSize}&bold=true&background=a0a0a0&color=cccccc`:"");return x(()=>t.item,async r=>{r&&(n.value=await P(r,f.THUMB,t.maxSize)||e.value)},{immediate:!0}),(r,u)=>(l(),$("div",{"max-height":i.maxSize,"max-width":i.maxSize,"min-height":i.minSize||i.size,"min-width":i.minSize||i.size,height:"auto",width:"100%"},[s(U,{size:i.size,"min-height":i.minSize,"min-width":i.minSize,rounded:i.tile?0:void 0},{default:h(()=>{var c,o;return[(l(),k(B,{key:"uri"in i.item?(c=i.item)==null?void 0:c.uri:(o=i.item)==null?void 0:o.queue_item_id,"min-height":i.minSize,"min-width":i.minSize,cover:i.cover,src:n.value},{placeholder:h(()=>[y("div",p,[s(M,{indeterminate:"",color:"grey-lighten-4"})])]),_:1},8,["min-height","min-width","cover","src"]))]}),_:1},8,["size","min-height","min-width","rounded"])],8,C))}});export{O as _,A as a,P as b,D as c,q as f,E as g,j as p,g as t};
